<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Prompt Architect | Bilingual</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    :root {
        --bg-color: #0b0d12;
        --panel-bg: #15181e;
        --text-main: #e0e0e0;
        --text-muted: #7a8599;
        --accent: #00d4ff;
        --accent-glow: rgba(0, 212, 255, 0.15);
        --border: #2a2f3a;
        --success: #00ff9d;
    }

    * { box-sizing: border-box; }

    body {
        font-family: 'Segoe UI', system-ui, sans-serif;
        background-color: var(--bg-color);
        color: var(--text-main);
        margin: 0;
        padding: 0;
        padding-bottom: 250px;
    }

    /* --- TOP BAR (Lang + Summary) --- */
    .top-bar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: rgba(21, 24, 30, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border);
        padding: 10px 20px;
        z-index: 1000;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 10px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }

    .lang-switch {
        display: flex;
        gap: 5px;
        background: #0b0d12;
        padding: 4px;
        border-radius: 6px;
        border: 1px solid var(--border);
    }

    .lang-btn {
        background: transparent;
        border: none;
        color: var(--text-muted);
        padding: 4px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
        font-weight: 600;
    }

    .lang-btn.active {
        background: var(--accent);
        color: #000;
    }

    .summary-container {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-items: center;
        flex: 1;
        margin-left: 20px;
        min-width: 200px;
    }

    .summary-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        color: var(--text-muted);
        font-weight: bold;
        white-space: nowrap;
    }

    .summary-tag {
        background: var(--accent-glow);
        border: 1px solid var(--accent);
        color: var(--accent);
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.75rem;
        display: flex;
        align-items: center;
        gap: 6px;
        animation: popIn 0.3s ease;
        max-width: 200px;
    }

    .summary-tag .remove {
        cursor: pointer;
        opacity: 0.7;
        font-weight: bold;
    }
    .summary-tag .remove:hover { opacity: 1; color: #fff; }

    @keyframes popIn {
        from { transform: scale(0.8); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

    /* --- MAIN LAYOUT --- */
    .app {
        max-width: 1200px;
        margin: 70px auto 0;
        padding: 20px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 15px;
    }

    header {
        grid-column: 1 / -1;
        text-align: center;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border);
    }
    h1 { margin: 0; color: var(--accent); font-size: 1.5rem; letter-spacing: 2px; }
    p { color: var(--text-muted); margin: 5px 0 0; font-size: 0.9rem; }

    /* --- PANELS --- */
    .panel {
        background: var(--panel-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        overflow: hidden;
        transition: border-color 0.2s;
    }
    .panel:hover { border-color: var(--text-muted); }

    .panel-header {
        padding: 10px 15px;
        background: rgba(255,255,255,0.02);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        user-select: none;
    }
    .panel-header h3 { margin: 0; font-size: 0.95rem; color: var(--text-main); }
    .panel-summary { font-size: 0.75rem; color: var(--accent); max-width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .panel-header::after { content: '‚ñº'; font-size: 0.7rem; color: var(--text-muted); transition: transform 0.3s; }
    .panel.active .panel-header::after { transform: rotate(180deg); }
    .panel.active { border-color: var(--accent); }

    .panel-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        padding: 0 15px;
    }
    .panel.active .panel-content {
        max-height: 600px;
        padding: 15px;
        border-top: 1px solid var(--border);
    }

    /* --- INPUTS --- */
    textarea {
        width: 100%;
        background: #0b0d12;
        border: 1px solid var(--border);
        color: var(--text-main);
        padding: 8px;
        border-radius: 4px;
        margin-bottom: 10px;
        font-size: 0.85rem;
        resize: vertical;
        min-height: 60px;
    }
    textarea:focus { outline: 1px solid var(--accent); }

    /* --- OPTION GRIDS (MULTI-SELECT) --- */
    .option-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 6px;
        margin-bottom: 10px;
    }

    .option-btn {
        background: #1e232b;
        border: 1px solid var(--border);
        color: var(--text-muted);
        padding: 6px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
        text-align: center;
        transition: all 0.2s;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        user-select: none;
    }
    .option-btn:hover { border-color: var(--text-muted); color: var(--text-main); }
    
    /* MULTI-SELECT STATE */
    .option-btn.selected {
        background: var(--accent);
        color: #000;
        border-color: var(--accent);
        font-weight: 600;
        box-shadow: 0 0 8px var(--accent-glow);
    }

    .sub-label {
        font-size: 0.7rem;
        color: var(--text-muted);
        text-transform: uppercase;
        margin: 10px 0 5px;
        display: block;
    }

    /* --- FIXED OUTPUT AREA --- */
    .output-area {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: var(--panel-bg);
        border-top: 1px solid var(--accent);
        padding: 15px 20px;
        z-index: 1000;
        box-shadow: 0 -4px 20px rgba(0,0,0,0.5);
    }
    .output-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        justify-content: center;
        flex-wrap: wrap;
    }
    #result {
        width: 100%;
        height: 80px;
        background: #0b0d12;
        border: 1px solid var(--border);
        color: var(--success);
        padding: 10px;
        border-radius: 4px;
        font-family: monospace;
        font-size: 0.9rem;
        resize: none;
    }
    .btn {
        padding: 8px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.85rem;
        transition: all 0.2s;
    }
    .btn-primary { background: var(--accent); color: #000; }
    .btn-primary:hover { background: #00a3cc; }
    .btn-secondary { background: #2a2f3a; color: var(--text-main); }
    .btn-secondary:hover { background: #3a404d; }
    .btn-random { background: transparent; border: 1px solid var(--text-muted); color: var(--text-muted); }
    .btn-random:hover { border-color: var(--text-main); color: var(--text-main); }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: var(--bg-color); }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
</style>
</head>
<body>

<!-- TOP BAR: Lang Switch + Summary -->
<div class="top-bar">
    <div class="lang-switch">
        <button class="lang-btn active" onclick="setLanguage('en')" id="btn-en">EN</button>
        <button class="lang-btn" onclick="setLanguage('es')" id="btn-es">ES</button>
    </div>
    <div class="summary-container" id="summaryBar">
        <span class="summary-label" data-i18n="active">Active:</span>
        <div id="summaryTags" style="display:flex; gap:8px; flex-wrap:wrap;"></div>
    </div>
</div>

<div class="app">

<header>
  <h1 data-i18n="title">PROMPT ARCHITECT</h1>
  <p data-i18n="subtitle">Compact Dashboard Interface</p>
</header>

<!-- PANEL 1: CHARACTER -->
<div class="panel active">
    <div class="panel-header">
        <h3 data-i18n="character">üß¨ Character</h3>
        <span class="panel-summary" id="sum-character"></span>
    </div>
    <div class="panel-content">
        <textarea id="charName" placeholder="Name..." oninput="updateSummary()"></textarea>
        <textarea id="charTraits" placeholder="Traits..." oninput="updateSummary()"></textarea>
    </div>
</div>

<!-- PANEL 2: SCENE -->
<div class="panel active">
    <div class="panel-header">
        <h3 data-i18n="scene">üé¨ Scene</h3>
        <span class="panel-summary" id="sum-scene"></span>
    </div>
    <div class="panel-content">
        <textarea id="subject" placeholder="Subject..." oninput="updateSummary()"></textarea>
        <textarea id="action" placeholder="Action..." oninput="updateSummary()"></textarea>
        <textarea id="location" placeholder="Location..." oninput="updateSummary()"></textarea>
    </div>
</div>

<!-- PANEL 3: STYLE -->
<div class="panel">
    <div class="panel-header">
        <h3 data-i18n="style">üé® Style</h3>
        <span class="panel-summary" id="sum-style"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label" data-i18n="artStyle">Art Style</span>
        <div class="option-grid" data-group="style">
            <button class="option-btn" data-value="cinematic">Cinematic</button>
            <button class="option-btn" data-value="cyberpunk">Cyberpunk</button>
            <button class="option-btn" data-value="ultra realistic">Realistic</button>
            <button class="option-btn" data-value="anime style">Anime</button>
            <button class="option-btn" data-value="fantasy art">Fantasy</button>
            <button class="option-btn" data-value="oil painting">Oil Painting</button>
        </div>
        <span class="sub-label" data-i18n="engine">Engine</span>
        <div class="option-grid" data-group="engine">
            <button class="option-btn" data-value="Unreal Engine 5">Unreal 5</button>
            <button class="option-btn" data-value="Octane render">Octane</button>
            <button class="option-btn" data-value="Redshift">Redshift</button>
        </div>
    </div>
</div>

<!-- PANEL 4: LIGHTING & TIME -->
<div class="panel">
    <div class="panel-header">
        <h3 data-i18n="lightTime">üí° Light & Time</h3>
        <span class="panel-summary" id="sum-light"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label" data-i18n="time">Time</span>
        <div class="option-grid" data-group="time">
            <button class="option-btn" data-value="dawn">Dawn</button>
            <button class="option-btn" data-value="midday">Midday</button>
            <button class="option-btn" data-value="sunset">Sunset</button>
            <button class="option-btn" data-value="night">Night</button>
        </div>
        <span class="sub-label" data-i18n="lighting">Lighting</span>
        <div class="option-grid" data-group="lighting">
            <button class="option-btn" data-value="dramatic lighting">Dramatic</button>
            <button class="option-btn" data-value="neon lighting">Neon</button>
            <button class="option-btn" data-value="soft lighting">Soft</button>
            <button class="option-btn" data-value="volumetric lighting">Volumetric</button>
        </div>
    </div>
</div>

<!-- PANEL 5: CAMERA -->
<div class="panel">
    <div class="panel-header">
        <h3 data-i18n="camera">üì∑ Camera</h3>
        <span class="panel-summary" id="sum-camera"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label" data-i18n="shot">Shot</span>
        <div class="option-grid" data-group="camera">
            <button class="option-btn" data-value="wide angle">Wide</button>
            <button class="option-btn" data-value="close-up">Close-up</button>
            <button class="option-btn" data-value="drone shot">Drone</button>
            <button class="option-btn" data-value="POV">POV</button>
            <button class="option-btn" data-value="macro shot">Macro</button>
        </div>
        <span class="sub-label" data-i18n="lens">Lens</span>
        <div class="option-grid" data-group="lens">
            <button class="option-btn" data-value="35mm">35mm</button>
            <button class="option-btn" data-value="85mm">85mm</button>
            <button class="option-btn" data-value="anamorphic">Anamorphic</button>
            <button class="option-btn" data-value="depth of field">DOF</button>
        </div>
    </div>
</div>

<!-- PANEL 6: ENV & WEATHER -->
<div class="panel">
    <div class="panel-header">
        <h3 data-i18n="envWeather">üåç Env & Weather</h3>
        <span class="panel-summary" id="sum-env"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label" data-i18n="environment">Environment</span>
        <div class="option-grid" data-group="environment">
            <button class="option-btn" data-value="forest">Forest</button>
            <button class="option-btn" data-value="desert">Desert</button>
            <button class="option-btn" data-value="cityscape">City</button>
            <button class="option-btn" data-value="space">Space</button>
        </div>
        <span class="sub-label" data-i18n="weather">Weather</span>
        <div class="option-grid" data-group="weather">
            <button class="option-btn" data-value="rainy">Rain</button>
            <button class="option-btn" data-value="stormy">Storm</button>
            <button class="option-btn" data-value="foggy">Fog</button>
            <button class="option-btn" data-value="sunny">Sunny</button>
            <button class="option-btn" data-value="snowy">Snow</button>
        </div>
    </div>
</div>

<!-- PANEL 7: OUTPUT -->
<div class="panel">
    <div class="panel-header">
        <h3 data-i18n="output">‚öôÔ∏è Output</h3>
        <span class="panel-summary" id="sum-output"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label" data-i18n="resolution">Resolution</span>
        <div class="option-grid" data-group="resolution">
            <button class="option-btn" data-value="8K">8K</button>
            <button class="option-btn" data-value="4K">4K</button>
            <button class="option-btn" data-value="HDR">HDR</button>
        </div>
        <span class="sub-label" data-i18n="ratio">Ratio</span>
        <div class="option-grid" data-group="ratio">
            <button class="option-btn" data-value="--ar 16:9">16:9</button>
            <button class="option-btn" data-value="--ar 9:16">9:16</button>
            <button class="option-btn" data-value="--ar 1:1">1:1</button>
        </div>
    </div>
</div>

<!-- PANEL 8: NEGATIVE -->
<div class="panel">
    <div class="panel-header">
        <h3 data-i18n="negative">‚õî Negative</h3>
        <span class="panel-summary" id="sum-negative"></span>
    </div>
    <div class="panel-content">
        <textarea id="negative" placeholder="Custom negative..." oninput="updateSummary()"></textarea>
        <div class="option-grid" data-group="negQuick">
            <button class="option-btn" data-value="text, watermark">No Text</button>
            <button class="option-btn" data-value="blurry, low quality">No Blur</button>
            <button class="option-btn" data-value="ugly, deformed">No Ugly</button>
        </div>
    </div>
</div>

</div>

<!-- FIXED OUTPUT AREA -->
<div class="output-area">
    <div class="output-controls">
        <button class="btn btn-random" onclick="randomize()">üé≤ <span data-i18n="random">Random</span></button>
        <button class="btn btn-primary" onclick="generatePrompt()">‚ö° <span data-i18n="generate">Generate</span></button>
        <button class="btn btn-secondary" onclick="copyPrompt()">üìã <span data-i18n="copy">Copy</span></button>
        <button class="btn btn-secondary" onclick="clearAll()">üóëÔ∏è <span data-i18n="clear">Clear</span></button>
    </div>
    <textarea id="result" readonly placeholder="Your prompt will appear here..."></textarea>
</div>

<script>
    // --- TRANSLATIONS ---
    const translations = {
        en: {
            active: "Active:",
            title: "PROMPT ARCHITECT",
            subtitle: "Compact Dashboard Interface",
            character: "üß¨ Character",
            scene: "üé¨ Scene",
            style: "üé® Style",
            artStyle: "Art Style",
            engine: "Engine",
            lightTime: "üí° Light & Time",
            time: "Time",
            lighting: "Lighting",
            camera: "üì∑ Camera",
            shot: "Shot",
            lens: "Lens",
            envWeather: "üåç Env & Weather",
            environment: "Environment",
            weather: "Weather",
            output: "‚öôÔ∏è Output",
            resolution: "Resolution",
            ratio: "Ratio",
            negative: "‚õî Negative",
            random: "Random",
            generate: "Generate",
            copy: "Copy",
            clear: "Clear",
            placeholderName: "Name...",
            placeholderTraits: "Traits...",
            placeholderSubject: "Subject...",
            placeholderAction: "Action...",
            placeholderLocation: "Location...",
            placeholderNegative: "Custom negative...",
            resultPlaceholder: "Your prompt will appear here..."
        },
        es: {
            active: "Activo:",
            title: "ARQUITECTO DE PROMPTS",
            subtitle: "Interfaz Compacta de Panel",
            character: "üß¨ Personaje",
            scene: "üé¨ Escena",
            style: "üé® Estilo",
            artStyle: "Estilo de Arte",
            engine: "Motor",
            lightTime: "üí° Luz y Tiempo",
            time: "Tiempo",
            lighting: "Iluminaci√≥n",
            camera: "üì∑ C√°mara",
            shot: "Toma",
            lens: "Lente",
            envWeather: "üåç Entorno y Clima",
            environment: "Entorno",
            weather: "Clima",
            output: "‚öôÔ∏è Salida",
            resolution: "Resoluci√≥n",
            ratio: "Proporci√≥n",
            negative: "‚õî Negativo",
            random: "Aleatorio",
            generate: "Generar",
            copy: "Copiar",
            clear: "Limpiar",
            placeholderName: "Nombre...",
            placeholderTraits: "Rasgos...",
            placeholderSubject: "Sujeto...",
            placeholderAction: "Acci√≥n...",
            placeholderLocation: "Ubicaci√≥n...",
            placeholderNegative: "Negativo personalizado...",
            resultPlaceholder: "Tu prompt aparecer√° aqu√≠..."
        }
    };

    let currentLang = 'en';

    // --- LANGUAGE SWITCH ---
    function setLanguage(lang) {
        currentLang = lang;
        
        // Update buttons
        document.getElementById('btn-en').classList.toggle('active', lang === 'en');
        document.getElementById('btn-es').classList.toggle('active', lang === 'es');
        
        // Update all text elements with data-i18n
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if(translations[lang][key]) {
                el.textContent = translations[lang][key];
            }
        });

        // Update placeholders
        document.getElementById('charName').placeholder = translations[lang].placeholderName;
        document.getElementById('charTraits').placeholder = translations[lang].placeholderTraits;
        document.getElementById('subject').placeholder = translations[lang].placeholderSubject;
        document.getElementById('action').placeholder = translations[lang].placeholderAction;
        document.getElementById('location').placeholder = translations[lang].placeholderLocation;
        document.getElementById('negative').placeholder = translations[lang].placeholderNegative;
        document.getElementById('result').placeholder = translations[lang].resultPlaceholder;

        // Update summary label
        document.querySelector('.summary-label').textContent = translations[lang].active + ' ';
        
        updateSummary();
    }

    // --- ACCORDION ---
    document.querySelectorAll('.panel-header').forEach(header => {
        header.addEventListener('click', () => {
            const panel = header.parentElement;
            panel.classList.toggle('active');
        });
    });

    // --- MULTI-SELECT BUTTON LOGIC ---
    document.querySelectorAll('.option-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            // Toggle current button (no exclusive logic anymore!)
            this.classList.toggle('selected');
            updateSummary();
        });
    });

    // --- SUMMARY SYSTEM ---
    function getSelectedValues(group) {
        const selected = document.querySelectorAll(`.option-grid[data-group="${group}"] .option-btn.selected`);
        return Array.from(selected).map(btn => btn.getAttribute('data-value'));
    }

    function getText(id) {
        const el = document.getElementById(id);
        return el.value.trim();
    }

    function updateSummary() {
        const tagsContainer = document.getElementById('summaryTags');
        tagsContainer.innerHTML = '';
        
        const selections = [
            { id: 'charName', label: 'Name' },
            { id: 'charTraits', label: 'Traits' },
            { group: 'style', label: 'Style' },
            { group: 'time', label: 'Time' },
            { group: 'lighting', label: 'Light' },
            { group: 'camera', label: 'Camera' },
            { group: 'environment', label: 'Env' },
            { group: 'weather', label: 'Weather' },
            { group: 'ratio', label: 'Ratio' }
        ];

        let activeCount = 0;

        selections.forEach(sel => {
            let values = sel.group ? getSelectedValues(sel.group) : (getText(sel.id) ? [getText(sel.id)] : []);
            values.forEach(value => {
                if(value) {
                    activeCount++;
                    const tag = document.createElement('div');
                    tag.className = 'summary-tag';
                    tag.innerHTML = `<span>${value}</span><span class="remove" onclick="removeSelection('${sel.group}', '${sel.id}', '${value}')">√ó</span>`;
                    tagsContainer.appendChild(tag);
                }
            });
        });

        if(activeCount === 0) {
            tagsContainer.innerHTML = `<span style="color:var(--text-muted); font-size:0.75rem;">${currentLang === 'en' ? 'No options selected yet' : 'A√∫n no hay opciones seleccionadas'}</span>`;
        }

        // Update panel summaries
        updatePanelSummary('sum-character', [getText('charName'), getText('charTraits')]);
        updatePanelSummary('sum-scene', [getText('subject'), getText('location')]);
        updatePanelSummary('sum-style', [...getSelectedValues('style'), ...getSelectedValues('engine')]);
        updatePanelSummary('sum-light', [...getSelectedValues('time'), ...getSelectedValues('lighting')]);
        updatePanelSummary('sum-camera', [...getSelectedValues('camera'), ...getSelectedValues('lens')]);
        updatePanelSummary('sum-env', [...getSelectedValues('environment'), ...getSelectedValues('weather')]);
        updatePanelSummary('sum-output', [...getSelectedValues('resolution'), ...getSelectedValues('ratio')]);
        updatePanelSummary('sum-negative', [getText('negative')]);
    }

    function updatePanelSummary(elementId, values) {
        const el = document.getElementById(elementId);
        const filtered = values.filter(v => v);
        el.textContent = filtered.length > 0 ? filtered.join(' ‚Ä¢ ') : '';
    }

    function removeSelection(group, id, value) {
        if(group) {
            // Find and deselect specific button
            document.querySelectorAll(`.option-grid[data-group="${group}"] .option-btn`).forEach(btn => {
                if(btn.getAttribute('data-value') === value) {
                    btn.classList.remove('selected');
                }
            });
        }
        if(id) {
            document.getElementById(id).value = '';
        }
        updateSummary();
    }

    // --- GENERATE PROMPT (ALWAYS IN ENGLISH) ---
    function generatePrompt() {
        let parts = [];
        
        // Text inputs (user types in any language, but we keep as-is for names)
        ['charName', 'charTraits', 'subject', 'action', 'location'].forEach(id => {
            const txt = getText(id);
            if(txt) parts.push(txt);
        });

        // Selected options (ALL data-values are in English)
        ['style', 'engine', 'time', 'lighting', 'camera', 'lens', 'environment', 'weather', 'resolution', 'ratio'].forEach(grp => {
            const vals = getSelectedValues(grp);
            vals.forEach(v => parts.push(v));
        });

        // Negative
        const neg = getText('negative');
        const negQ = getSelectedValues('negQuick');
        if(neg || negQ.length > 0) {
            parts.push('--no ' + [neg, ...negQ].filter(Boolean).join(', '));
        }

        document.getElementById('result').value = parts.join(', ');
        updateSummary();
    }

    // --- UTILS ---
    function copyPrompt() {
        const el = document.getElementById('result');
        el.select();
        navigator.clipboard.writeText(el.value);
        const btn = event.target.closest('.btn');
        const orig = btn.textContent;
        btn.textContent = currentLang === 'en' ? '‚úÖ Copied!' : '‚úÖ ¬°Copiado!';
        setTimeout(() => {
            btn.innerHTML = 'üìã <span data-i18n="copy">' + (currentLang === 'en' ? 'Copy' : 'Copiar') + '</span>';
        }, 1500);
    }

    function clearAll() {
        document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
        document.querySelectorAll('textarea').forEach(t => t.value = '');
        updateSummary();
        document.getElementById('result').value = '';
    }

    function randomize() {
        const groups = ['style', 'time', 'lighting', 'camera', 'environment', 'weather', 'ratio'];
        groups.forEach(g => {
            const opts = document.querySelectorAll(`.option-grid[data-group="${g}"] .option-btn`);
            if(opts.length) {
                // Clear previous
                opts.forEach(o => o.classList.remove('selected'));
                // Select 1-3 random options
                const count = Math.floor(Math.random() * 3) + 1;
                for(let i = 0; i < count; i++) {
                    const random = opts[Math.floor(Math.random() * opts.length)];
                    random.classList.add('selected');
                }
            }
        });
        document.getElementById('charName').value = 'Cyber Entity';
        document.getElementById('subject').value = 'Lone figure';
        updateSummary();
        generatePrompt();
    }

    // Init
    setLanguage('en');
    updateSummary();
</script>

</body>
</html>
