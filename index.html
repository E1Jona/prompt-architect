<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Prompt Architect | Compact</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    :root {
        --bg-color: #0b0d12;
        --panel-bg: #15181e;
        --text-main: #e0e0e0;
        --text-muted: #7a8599;
        --accent: #00d4ff;
        --accent-glow: rgba(0, 212, 255, 0.15);
        --border: #2a2f3a;
        --success: #00ff9d;
    }

    * { box-sizing: border-box; }

    body {
        font-family: 'Segoe UI', system-ui, sans-serif;
        background-color: var(--bg-color);
        color: var(--text-main);
        margin: 0;
        padding: 0;
        padding-bottom: 250px; /* Space for fixed output */
    }

    /* --- STICKY SUMMARY BAR --- */
    .sticky-summary {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: rgba(21, 24, 30, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border);
        padding: 10px 20px;
        z-index: 1000;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-items: center;
        box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }

    .summary-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        color: var(--text-muted);
        font-weight: bold;
        margin-right: 5px;
    }

    .summary-tag {
        background: var(--accent-glow);
        border: 1px solid var(--accent);
        color: var(--accent);
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.75rem;
        display: flex;
        align-items: center;
        gap: 6px;
        animation: popIn 0.3s ease;
    }

    .summary-tag .remove {
        cursor: pointer;
        opacity: 0.7;
        font-weight: bold;
    }
    .summary-tag .remove:hover { opacity: 1; color: #fff; }

    @keyframes popIn {
        from { transform: scale(0.8); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

    /* --- MAIN LAYOUT --- */
    .app {
        max-width: 1200px;
        margin: 60px auto 0;
        padding: 20px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 15px;
    }

    header {
        grid-column: 1 / -1;
        text-align: center;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border);
    }
    h1 { margin: 0; color: var(--accent); font-size: 1.5rem; letter-spacing: 2px; }
    p { color: var(--text-muted); margin: 5px 0 0; font-size: 0.9rem; }

    /* --- COMPACT PANELS --- */
    .panel {
        background: var(--panel-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        overflow: hidden;
        transition: border-color 0.2s;
    }
    .panel:hover { border-color: var(--text-muted); }

    .panel-header {
        padding: 10px 15px;
        background: rgba(255,255,255,0.02);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        user-select: none;
    }
    .panel-header h3 { margin: 0; font-size: 0.95rem; color: var(--text-main); }
    .panel-summary { font-size: 0.75rem; color: var(--accent); max-width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .panel-header::after { content: '‚ñº'; font-size: 0.7rem; color: var(--text-muted); transition: transform 0.3s; }
    .panel.active .panel-header::after { transform: rotate(180deg); }
    .panel.active { border-color: var(--accent); }

    .panel-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        padding: 0 15px;
    }
    .panel.active .panel-content {
        max-height: 500px;
        padding: 15px;
        border-top: 1px solid var(--border);
    }

    /* --- INPUTS --- */
    textarea {
        width: 100%;
        background: #0b0d12;
        border: 1px solid var(--border);
        color: var(--text-main);
        padding: 8px;
        border-radius: 4px;
        margin-bottom: 10px;
        font-size: 0.85rem;
        resize: vertical;
        min-height: 60px;
    }
    textarea:focus { outline: 1px solid var(--accent); }

    /* --- OPTION GRIDS --- */
    .option-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 6px;
        margin-bottom: 10px;
    }

    .option-btn {
        background: #1e232b;
        border: 1px solid var(--border);
        color: var(--text-muted);
        padding: 6px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
        text-align: center;
        transition: all 0.2s;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .option-btn:hover { border-color: var(--text-muted); color: var(--text-main); }
    .option-btn.selected {
        background: var(--accent);
        color: #000;
        border-color: var(--accent);
        font-weight: 600;
    }

    .sub-label {
        font-size: 0.7rem;
        color: var(--text-muted);
        text-transform: uppercase;
        margin: 10px 0 5px;
        display: block;
    }

    /* --- FIXED OUTPUT AREA --- */
    .output-area {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: var(--panel-bg);
        border-top: 1px solid var(--accent);
        padding: 15px 20px;
        z-index: 1000;
        box-shadow: 0 -4px 20px rgba(0,0,0,0.5);
    }
    .output-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        justify-content: center;
    }
    #result {
        width: 100%;
        height: 80px;
        background: #0b0d12;
        border: 1px solid var(--border);
        color: var(--success);
        padding: 10px;
        border-radius: 4px;
        font-family: monospace;
        font-size: 0.9rem;
        resize: none;
    }
    .btn {
        padding: 8px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.85rem;
        transition: all 0.2s;
    }
    .btn-primary { background: var(--accent); color: #000; }
    .btn-primary:hover { background: #00a3cc; }
    .btn-secondary { background: #2a2f3a; color: var(--text-main); }
    .btn-secondary:hover { background: #3a404d; }
    .btn-random { background: transparent; border: 1px solid var(--text-muted); color: var(--text-muted); }
    .btn-random:hover { border-color: var(--text-main); color: var(--text-main); }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: var(--bg-color); }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
</style>
</head>
<body>

<!-- STICKY SUMMARY BAR -->
<div class="sticky-summary" id="summaryBar">
    <span class="summary-label">Active:</span>
    <div id="summaryTags" style="display:flex; gap:8px; flex-wrap:wrap;"></div>
</div>

<div class="app">

<header>
  <h1>PROMPT ARCHITECT</h1>
  <p>Compact Dashboard Interface</p>
</header>

<!-- PANEL 1: CHARACTER -->
<div class="panel active">
    <div class="panel-header">
        <h3>üß¨ Character</h3>
        <span class="panel-summary" id="sum-character"></span>
    </div>
    <div class="panel-content">
        <textarea id="charName" placeholder="Name..." oninput="updateSummary()"></textarea>
        <textarea id="charTraits" placeholder="Traits..." oninput="updateSummary()"></textarea>
    </div>
</div>

<!-- PANEL 2: SCENE -->
<div class="panel active">
    <div class="panel-header">
        <h3>üé¨ Scene</h3>
        <span class="panel-summary" id="sum-scene"></span>
    </div>
    <div class="panel-content">
        <textarea id="subject" placeholder="Subject..." oninput="updateSummary()"></textarea>
        <textarea id="action" placeholder="Action..." oninput="updateSummary()"></textarea>
        <textarea id="location" placeholder="Location..." oninput="updateSummary()"></textarea>
    </div>
</div>

<!-- PANEL 3: STYLE -->
<div class="panel">
    <div class="panel-header">
        <h3>üé® Style</h3>
        <span class="panel-summary" id="sum-style"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label">Art Style</span>
        <div class="option-grid" data-group="style">
            <button class="option-btn" data-value="cinematic">Cinematic</button>
            <button class="option-btn" data-value="cyberpunk">Cyberpunk</button>
            <button class="option-btn" data-value="ultra realistic">Realistic</button>
            <button class="option-btn" data-value="anime style">Anime</button>
            <button class="option-btn" data-value="fantasy art">Fantasy</button>
            <button class="option-btn" data-value="oil painting">Oil Painting</button>
        </div>
        <span class="sub-label">Engine</span>
        <div class="option-grid" data-group="engine">
            <button class="option-btn" data-value="Unreal Engine 5">Unreal 5</button>
            <button class="option-btn" data-value="Octane render">Octane</button>
            <button class="option-btn" data-value="Redshift">Redshift</button>
        </div>
    </div>
</div>

<!-- PANEL 4: LIGHTING & TIME -->
<div class="panel">
    <div class="panel-header">
        <h3>üí° Light & Time</h3>
        <span class="panel-summary" id="sum-light"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label">Time</span>
        <div class="option-grid" data-group="time">
            <button class="option-btn" data-value="dawn">Dawn</button>
            <button class="option-btn" data-value="midday">Midday</button>
            <button class="option-btn" data-value="sunset">Sunset</button>
            <button class="option-btn" data-value="night">Night</button>
        </div>
        <span class="sub-label">Lighting</span>
        <div class="option-grid" data-group="lighting">
            <button class="option-btn" data-value="dramatic lighting">Dramatic</button>
            <button class="option-btn" data-value="neon lighting">Neon</button>
            <button class="option-btn" data-value="soft lighting">Soft</button>
            <button class="option-btn" data-value="volumetric lighting">Volumetric</button>
        </div>
    </div>
</div>

<!-- PANEL 5: CAMERA -->
<div class="panel">
    <div class="panel-header">
        <h3>üì∑ Camera</h3>
        <span class="panel-summary" id="sum-camera"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label">Shot</span>
        <div class="option-grid" data-group="camera">
            <button class="option-btn" data-value="wide angle">Wide</button>
            <button class="option-btn" data-value="close-up">Close-up</button>
            <button class="option-btn" data-value="drone shot">Drone</button>
            <button class="option-btn" data-value="POV">POV</button>
            <button class="option-btn" data-value="macro shot">Macro</button>
        </div>
        <span class="sub-label">Lens</span>
        <div class="option-grid" data-group="lens">
            <button class="option-btn" data-value="35mm">35mm</button>
            <button class="option-btn" data-value="85mm">85mm</button>
            <button class="option-btn" data-value="anamorphic">Anamorphic</button>
            <button class="option-btn" data-value="depth of field">DOF</button>
        </div>
    </div>
</div>

<!-- PANEL 6: ENV & WEATHER -->
<div class="panel">
    <div class="panel-header">
        <h3>üåç Env & Weather</h3>
        <span class="panel-summary" id="sum-env"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label">Environment</span>
        <div class="option-grid" data-group="environment">
            <button class="option-btn" data-value="forest">Forest</button>
            <button class="option-btn" data-value="desert">Desert</button>
            <button class="option-btn" data-value="cityscape">City</button>
            <button class="option-btn" data-value="space">Space</button>
        </div>
        <span class="sub-label">Weather</span>
        <div class="option-grid" data-group="weather">
            <button class="option-btn" data-value="rainy">Rain</button>
            <button class="option-btn" data-value="stormy">Storm</button>
            <button class="option-btn" data-value="foggy">Fog</button>
            <button class="option-btn" data-value="sunny">Sunny</button>
        </div>
    </div>
</div>

<!-- PANEL 7: OUTPUT -->
<div class="panel">
    <div class="panel-header">
        <h3>‚öôÔ∏è Output</h3>
        <span class="panel-summary" id="sum-output"></span>
    </div>
    <div class="panel-content">
        <span class="sub-label">Resolution</span>
        <div class="option-grid" data-group="resolution">
            <button class="option-btn" data-value="8K">8K</button>
            <button class="option-btn" data-value="4K">4K</button>
            <button class="option-btn" data-value="HDR">HDR</button>
        </div>
        <span class="sub-label">Ratio</span>
        <div class="option-grid" data-group="ratio">
            <button class="option-btn" data-value="--ar 16:9">16:9</button>
            <button class="option-btn" data-value="--ar 9:16">9:16</button>
            <button class="option-btn" data-value="--ar 1:1">1:1</button>
        </div>
    </div>
</div>

<!-- PANEL 8: NEGATIVE -->
<div class="panel">
    <div class="panel-header">
        <h3>‚õî Negative</h3>
        <span class="panel-summary" id="sum-negative"></span>
    </div>
    <div class="panel-content">
        <textarea id="negative" placeholder="Custom negative..." oninput="updateSummary()"></textarea>
        <div class="option-grid" data-group="negQuick">
            <button class="option-btn" data-value="text, watermark">No Text</button>
            <button class="option-btn" data-value="blurry, low quality">No Blur</button>
            <button class="option-btn" data-value="ugly, deformed">No Ugly</button>
        </div>
    </div>
</div>

</div>

<!-- FIXED OUTPUT AREA -->
<div class="output-area">
    <div class="output-controls">
        <button class="btn btn-random" onclick="randomize()">üé≤ Random</button>
        <button class="btn btn-primary" onclick="generatePrompt()">‚ö° Generate</button>
        <button class="btn btn-secondary" onclick="copyPrompt()">üìã Copy</button>
        <button class="btn btn-secondary" onclick="clearAll()">üóëÔ∏è Clear</button>
    </div>
    <textarea id="result" readonly placeholder="Your prompt will appear here..."></textarea>
</div>

<script>
    // --- ACCORDION ---
    document.querySelectorAll('.panel-header').forEach(header => {
        header.addEventListener('click', () => {
            const panel = header.parentElement;
            panel.classList.toggle('active');
        });
    });

    // --- BUTTON SELECTION ---
    document.querySelectorAll('.option-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const group = this.parentElement.getAttribute('data-group');
            // Toggle selection
            if(this.classList.contains('selected')) {
                this.classList.remove('selected');
            } else {
                // Remove siblings
                document.querySelectorAll(`.option-grid[data-group="${group}"] .option-btn`).forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
            }
            updateSummary();
        });
    });

    // --- SUMMARY SYSTEM ---
    function getSelected(group) {
        const el = document.querySelector(`.option-grid[data-group="${group}"] .option-btn.selected`);
        return el ? el.getAttribute('data-value') : null;
    }

    function getText(id) {
        const el = document.getElementById(id);
        return el.value.trim();
    }

    function updateSummary() {
        const tagsContainer = document.getElementById('summaryTags');
        tagsContainer.innerHTML = '';
        
        const selections = [
            { id: 'charName', label: 'Name' },
            { id: 'charTraits', label: 'Traits' },
            { group: 'style', label: 'Style' },
            { group: 'time', label: 'Time' },
            { group: 'lighting', label: 'Light' },
            { group: 'camera', label: 'Camera' },
            { group: 'environment', label: 'Env' },
            { group: 'ratio', label: 'Ratio' }
        ];

        let activeCount = 0;

        selections.forEach(sel => {
            let value = sel.group ? getSelected(sel.group) : getText(sel.id);
            if(value) {
                activeCount++;
                const tag = document.createElement('div');
                tag.className = 'summary-tag';
                tag.innerHTML = `<span>${value}</span><span class="remove" onclick="clearSelection('${sel.group}', '${sel.id}')">√ó</span>`;
                tagsContainer.appendChild(tag);
            }
        });

        if(activeCount === 0) {
            tagsContainer.innerHTML = '<span style="color:var(--text-muted); font-size:0.75rem;">No options selected yet</span>';
        }

        // Update panel summaries
        updatePanelSummary('sum-character', [getText('charName'), getText('charTraits')]);
        updatePanelSummary('sum-scene', [getText('subject'), getText('location')]);
        updatePanelSummary('sum-style', [getSelected('style'), getSelected('engine')]);
        updatePanelSummary('sum-light', [getSelected('time'), getSelected('lighting')]);
        updatePanelSummary('sum-camera', [getSelected('camera'), getSelected('lens')]);
        updatePanelSummary('sum-env', [getSelected('environment'), getSelected('weather')]);
        updatePanelSummary('sum-output', [getSelected('resolution'), getSelected('ratio')]);
        updatePanelSummary('sum-negative', [getText('negative')]);
    }

    function updatePanelSummary(elementId, values) {
        const el = document.getElementById(elementId);
        const filtered = values.filter(v => v);
        el.textContent = filtered.length > 0 ? filtered.join(' ‚Ä¢ ') : '';
    }

    function clearSelection(group, id) {
        if(group) {
            document.querySelectorAll(`.option-grid[data-group="${group}"] .option-btn`).forEach(b => b.classList.remove('selected'));
        }
        if(id) {
            document.getElementById(id).value = '';
        }
        updateSummary();
    }

    // --- GENERATE ---
    function generatePrompt() {
        let parts = [];
        
        // Text inputs
        ['charName', 'charTraits', 'subject', 'action', 'location'].forEach(id => {
            const txt = getText(id);
            if(txt) parts.push(txt);
        });

        // Selected options
        ['style', 'engine', 'time', 'lighting', 'camera', 'lens', 'environment', 'weather', 'resolution', 'ratio'].forEach(grp => {
            const val = getSelected(grp);
            if(val) parts.push(val);
        });

        // Negative
        const neg = getText('negative');
        const negQ = getSelected('negQuick');
        if(neg || negQ) {
            parts.push('--no ' + [neg, negQ].filter(Boolean).join(', '));
        }

        document.getElementById('result').value = parts.join(', ');
        updateSummary();
    }

    // --- UTILS ---
    function copyPrompt() {
        const el = document.getElementById('result');
        el.select();
        navigator.clipboard.writeText(el.value);
        const btn = event.target;
        const orig = btn.textContent;
        btn.textContent = '‚úÖ Copied!';
        setTimeout(() => btn.textContent = orig, 1500);
    }

    function clearAll() {
        document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
        document.querySelectorAll('textarea').forEach(t => t.value = '');
        updateSummary();
        document.getElementById('result').value = '';
    }

    function randomize() {
        const groups = ['style', 'time', 'lighting', 'camera', 'environment', 'ratio'];
        groups.forEach(g => {
            const opts = document.querySelectorAll(`.option-grid[data-group="${g}"] .option-btn`);
            if(opts.length) {
                opts.forEach(o => o.classList.remove('selected'));
                opts[Math.floor(Math.random() * opts.length)].classList.add('selected');
            }
        });
        document.getElementById('charName').value = 'Cyber Entity';
        document.getElementById('subject').value = 'Lone figure';
        updateSummary();
        generatePrompt();
    }

    // Init
    updateSummary();
</script>

</body>
</html>
