<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Grok Prompt Architect v4.2 | Imagine Optimized</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    :root {
        --bg-color: #0a0c10;
        --panel-bg: #14171d;
        --text-main: #e8e8e8;
        --text-muted: #6b7785;
        --accent: #00d4ff;
        --accent-glow: rgba(0, 212, 255, 0.2);
        --border: #2a3038;
        --success: #00ff9d;
        --warning: #ffaa00;
        --grok-purple: #8b5cf6;
        --danger: #ff4757;
        --gold: #ffd700;
    }

    * { box-sizing: border-box; }

    body {
        font-family: 'Segoe UI', system-ui, sans-serif;
        background: linear-gradient(135deg, #0a0c10 0%, #0f1115 100%);
        color: var(--text-main);
        margin: 0;
        padding: 0;
        padding-bottom: 300px;
        min-height: 100vh;
    }

    /* --- TOP BAR --- */
    .top-bar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: rgba(20, 23, 29, 0.98);
        backdrop-filter: blur(15px);
        border-bottom: 2px solid var(--accent);
        padding: 12px 20px;
        z-index: 1000;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
        box-shadow: 0 4px 30px rgba(0,0,0,0.6);
    }

    .brand {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .brand-logo {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, var(--accent), var(--grok-purple));
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.3rem;
        color: #fff;
        box-shadow: 0 0 15px var(--accent-glow);
    }

    .brand-text h1 {
        margin: 0;
        font-size: 1.1rem;
        background: linear-gradient(90deg, var(--accent), var(--grok-purple));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        letter-spacing: 1px;
    }

    .brand-text span {
        font-size: 0.65rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .lang-switch {
        display: flex;
        gap: 4px;
        background: #0a0c10;
        padding: 3px;
        border-radius: 6px;
        border: 1px solid var(--border);
    }

    .lang-btn {
        background: transparent;
        border: none;
        color: var(--text-muted);
        padding: 5px 14px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.75rem;
        font-weight: 600;
        transition: all 0.2s;
    }

    .lang-btn.active {
        background: var(--accent);
        color: #000;
    }

    .summary-container {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        align-items: center;
        flex: 1;
        margin-left: 20px;
        min-width: 200px;
        max-height: 70px;
        overflow-y: auto;
    }

    .summary-label {
        font-size: 0.7rem;
        text-transform: uppercase;
        color: var(--text-muted);
        font-weight: 700;
        white-space: nowrap;
    }

    .summary-tag {
        background: rgba(0, 212, 255, 0.1);
        border: 1px solid var(--accent);
        color: var(--accent);
        padding: 3px 8px;
        border-radius: 10px;
        font-size: 0.68rem;
        display: flex;
        align-items: center;
        gap: 5px;
        animation: popIn 0.3s ease;
        max-width: 140px;
    }

    .summary-tag .remove {
        cursor: pointer;
        opacity: 0.6;
        font-weight: bold;
        font-size: 0.85rem;
    }
    .summary-tag .remove:hover { opacity: 1; color: #fff; }

    .grok-badge {
        background: linear-gradient(135deg, var(--grok-purple), #6d28d9);
        color: #fff;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.65rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .version-badge {
        background: var(--gold);
        color: #000;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.6rem;
        font-weight: 700;
        margin-left: 5px;
    }

    @keyframes popIn {
        from { transform: scale(0.8); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

    /* --- INFO ALERT --- */
    .info-alert {
        max-width: 1400px;
        margin: 70px auto 15px;
        padding: 14px 24px;
        background: rgba(0, 212, 255, 0.08);
        border: 1px solid rgba(0, 212, 255, 0.3);
        border-radius: 10px;
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 0.85rem;
    }

    .info-alert-icon {
        font-size: 1.4rem;
        flex-shrink: 0;
    }

    .info-alert-content {
        color: var(--text-muted);
        line-height: 1.5;
    }

    .info-alert strong {
        color: var(--accent);
    }

    .formula-display {
        background: rgba(0, 212, 255, 0.05);
        border: 1px dashed var(--accent);
        border-radius: 6px;
        padding: 8px 12px;
        margin-top: 8px;
        font-family: 'Consolas', monospace;
        font-size: 0.75rem;
        color: var(--accent);
    }

    /* --- MAIN LAYOUT --- */
    .app {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px 20px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
        gap: 15px;
    }

    /* --- PANELS --- */
    .panel {
        background: var(--panel-bg);
        border: 1px solid var(--border);
        border-radius: 10px;
        overflow: hidden;
        transition: all 0.3s;
    }

    .panel:hover {
        border-color: var(--text-muted);
        transform: translateY(-2px);
    }

    .panel.critical {
        border-color: var(--accent);
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.1);
    }

    .panel.premium {
        border-color: var(--gold);
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.1);
    }

    .panel-header {
        padding: 14px 18px;
        background: rgba(255,255,255,0.02);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        user-select: none;
    }

    .panel-header h3 {
        margin: 0;
        font-size: 0.95rem;
        color: var(--text-main);
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .panel-priority {
        font-size: 0.65rem;
        padding: 2px 6px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: 700;
    }

    .priority-high {
        background: rgba(255, 170, 0, 0.2);
        color: var(--warning);
    }

    .priority-critical {
        background: rgba(255, 71, 87, 0.2);
        color: var(--danger);
    }

    .priority-premium {
        background: rgba(255, 215, 0, 0.2);
        color: var(--gold);
    }

    .panel-summary {
        font-size: 0.7rem;
        color: var(--accent);
        max-width: 180px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .panel-header::after {
        content: '‚ñº';
        font-size: 0.65rem;
        color: var(--text-muted);
        transition: transform 0.3s;
    }

    .panel.active .panel-header::after {
        transform: rotate(180deg);
    }

    .panel.active {
        border-color: var(--accent);
    }

    .panel-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        padding: 0 18px;
    }

    .panel.active .panel-content {
        max-height: 1000px;
        padding: 18px;
        border-top: 1px solid var(--border);
    }

    /* --- INPUTS --- */
    textarea, input[type="text"] {
        width: 100%;
        background: #0a0c10;
        border: 1px solid var(--border);
        color: var(--text-main);
        padding: 10px;
        border-radius: 6px;
        margin-bottom: 10px;
        font-size: 0.85rem;
        resize: vertical;
        min-height: 65px;
        font-family: 'Consolas', monospace;
    }

    textarea:focus, input:focus {
        outline: 1px solid var(--accent);
        border-color: var(--accent);
    }

    textarea::placeholder {
        color: var(--text-muted);
    }

    /* --- OPTION GRIDS --- */
    .option-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 7px;
        margin-bottom: 12px;
    }

    .option-btn {
        background: #1a1e26;
        border: 1px solid var(--border);
        color: var(--text-muted);
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.75rem;
        text-align: center;
        transition: all 0.25s;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        user-select: none;
        position: relative;
    }

    .option-btn:hover {
        border-color: var(--text-muted);
        color: var(--text-main);
        background: #222831;
    }

    .option-btn.selected {
        background: linear-gradient(135deg, var(--accent), #00a3cc);
        color: #000;
        border-color: var(--accent);
        font-weight: 700;
        box-shadow: 0 0 15px var(--accent-glow);
    }

    .option-btn.premium {
        border-color: var(--gold);
        color: var(--gold);
    }

    .option-btn.premium.selected {
        background: linear-gradient(135deg, var(--gold), #ffaa00);
        color: #000;
        border-color: var(--gold);
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
    }

    .sub-label {
        font-size: 0.7rem;
        color: var(--text-muted);
        text-transform: uppercase;
        margin: 12px 0 6px;
        display: block;
        letter-spacing: 0.5px;
        font-weight: 600;
    }

    .sub-label.critical {
        color: var(--warning);
    }

    .sub-label.danger {
        color: var(--danger);
    }

    .sub-label.premium {
        color: var(--gold);
    }

    /* --- FIXED OUTPUT AREA --- */
    .output-area {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(180deg, var(--panel-bg) 0%, #0f1115 100%);
        border-top: 2px solid var(--accent);
        padding: 18px 20px;
        z-index: 1000;
        box-shadow: 0 -6px 30px rgba(0,0,0,0.7);
    }

    .output-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        flex-wrap: wrap;
        gap: 10px;
    }

    .output-title {
        font-size: 0.85rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 1px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .grok-structure-hint {
        font-size: 0.68rem;
        color: var(--accent);
        background: rgba(0, 212, 255, 0.1);
        padding: 4px 10px;
        border-radius: 12px;
        font-family: 'Consolas', monospace;
    }

    .output-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 12px;
        justify-content: center;
        flex-wrap: wrap;
    }

    #result {
        width: 100%;
        height: 110px;
        background: #0a0c10;
        border: 1px solid var(--border);
        color: var(--success);
        padding: 12px;
        border-radius: 6px;
        font-family: 'Consolas', monospace;
        font-size: 0.85rem;
        resize: vertical;
        line-height: 1.5;
    }

    #result:focus {
        outline: 1px solid var(--success);
        border-color: var(--success);
    }

    .btn {
        padding: 10px 22px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.8rem;
        transition: all 0.25s;
        letter-spacing: 0.5px;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .btn-primary {
        background: linear-gradient(135deg, var(--accent), #00a3cc);
        color: #000;
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
    }

    .btn-secondary {
        background: #2a3038;
        color: var(--text-main);
    }

    .btn-secondary:hover {
        background: #3a424d;
    }

    .btn-random {
        background: transparent;
        border: 1px solid var(--text-muted);
        color: var(--text-muted);
    }

    .btn-random:hover {
        border-color: var(--text-main);
        color: var(--text-main);
    }

    .btn-grok {
        background: linear-gradient(135deg, var(--grok-purple), #6d28d9);
        color: #fff;
    }

    .btn-grok:hover {
        box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
    }

    .btn-premium {
        background: linear-gradient(135deg, var(--gold), #ffaa00);
        color: #000;
    }

    .btn-premium:hover {
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
    }

    /* --- SPICY MODE --- */
    .spicy-warning {
        background: rgba(255, 170, 0, 0.1);
        border: 1px solid var(--warning);
        border-radius: 6px;
        padding: 10px;
        margin-bottom: 12px;
        font-size: 0.75rem;
        color: var(--warning);
    }

    .spicy-toggle {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
    }

    .toggle-switch {
        width: 44px;
        height: 24px;
        background: #2a3038;
        border-radius: 12px;
        position: relative;
        cursor: pointer;
        transition: background 0.3s;
    }

    .toggle-switch.active {
        background: var(--warning);
    }

    .toggle-switch::after {
        content: '';
        position: absolute;
        width: 18px;
        height: 18px;
        background: #fff;
        border-radius: 50%;
        top: 3px;
        left: 3px;
        transition: transform 0.3s;
    }

    .toggle-switch.active::after {
        transform: translateX(20px);
    }

    /* --- SCROLLBAR --- */
    ::-webkit-scrollbar {
        width: 7px;
        height: 7px;
    }

    ::-webkit-scrollbar-track {
        background: var(--bg-color);
    }

    ::-webkit-scrollbar-thumb {
        background: var(--border);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--text-muted);
    }

    /* --- RESPONSIVE --- */
    @media (max-width: 768px) {
        .top-bar {
            flex-direction: column;
            align-items: flex-start;
        }

        .summary-container {
            margin-left: 0;
            width: 100%;
        }

        .app {
            grid-template-columns: 1fr;
        }

        .output-controls {
            flex-direction: column;
        }

        .btn {
            width: 100%;
            justify-content: center;
        }
    }
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="top-bar">
    <div class="brand">
        <div class="brand-logo">G</div>
        <div class="brand-text">
            <h1>GROK PROMPT ARCHITECT <span class="version-badge">v4.2</span></h1>
            <span data-i18n="subtitle">Imagine 1.0 | Aurora Engine</span>
        </div>
    </div>
    
    <div class="summary-container" id="summaryBar">
        <span class="summary-label" data-i18n="active">Active:</span>
        <div id="summaryTags" style="display:flex; gap:6px; flex-wrap:wrap;"></div>
    </div>

    <div class="lang-switch">
        <button class="lang-btn active" onclick="setLanguage('en')" id="btn-en">EN</button>
        <button class="lang-btn" onclick="setLanguage('es')" id="btn-es">ES</button>
    </div>
</div>

<!-- INFO ALERT -->
<div class="info-alert">
    <span class="info-alert-icon">‚ö°</span>
    <div class="info-alert-content">
        <strong data-i18n="alertTitle">Grok Protocol Active:</strong>
        <span data-i18n="alertText">Subject + Action MUST be FIRST (logarithmic weight). Negative prompts auto-included. Optimal: 720p, 8s segments for perfect lip-sync.</span>
        <div class="formula-display">[Sujeto]+[Acci√≥n]+[√ìptica]; [Iluminaci√≥n]; [F√≠sica]+[Detalles]</div>
    </div>
    <span class="grok-badge">Aurora MoE</span>
</div>

<div class="app">

<!-- PANEL 1: SUBJECT -->
<div class="panel critical active">
    <div class="panel-header">
        <h3>
            üéØ <span data-i18n="subject">Subject & Action</span>
            <span class="panel-priority priority-critical" data-i18n="priorityCritical">LAYER 1</span>
        </h3>
        <span class="panel-summary" id="sum-subject"></span>
    </div>
    <div class="panel-content">
        <div style="background: rgba(255, 170, 0, 0.1); border: 1px solid var(--warning); border-radius: 6px; padding: 12px; margin-bottom: 15px; font-size: 0.8rem; color: var(--warning);">
            <strong>‚ö†Ô∏è CRITICAL:</strong> <span data-i18n="subjectWarning">These tokens have LOGARITHMIC WEIGHT. Must be FIRST in prompt for Grok Aurora engine.</span>
        </div>
        
        <label class="sub-label critical" data-i18n="mainSubject">Main Subject (FIRST in prompt)</label>
        <textarea id="subject" placeholder="e.g. A cybernetic warrior with neon tattoos and natural skin pores..." oninput="updateSummary()"></textarea>
        
        <label class="sub-label" data-i18n="action">Primary Action</label>
        <textarea id="action" placeholder="e.g. walking through rain-soaked neon streets with wind affecting clothing..." oninput="updateSummary()"></textarea>
        
        <label class="sub-label" data-i18n="characterDNA">Character DNA (Immutable Traits)</label>
        <textarea id="charDNA" placeholder="Age, ethnicity, voice tone, exact features for consistency..." oninput="updateSummary()"></textarea>
    </div>
</div>

<!-- PANEL 2: LENS LIBRARY -->
<div class="panel">
    <div class="panel-header">
        <h3>üì∑ <span data-i18n="lensLibrary">Lens Library</span></h3>
        <span class="panel-summary" id="sum-lens"></span>
    </div>
    <div class="panel-content">
        <label class="sub-label" data-i18n="focalLength">Focal Length</label>
        <div class="option-grid" data-group="focalLength">
            <button class="option-btn" data-value="14mm fisheye lens, extreme wide distortion" data-i18n-btn="btn_14mm">14mm Fisheye</button>
            <button class="option-btn" data-value="24mm wide angle lens, environmental context" data-i18n-btn="btn_24mm">24mm Wide</button>
            <button class="option-btn" data-value="35mm lens, natural perspective" data-i18n-btn="btn_35mm">35mm Standard</button>
            <button class="option-btn" data-value="50mm standard lens, natural view" data-i18n-btn="btn_50mm">50mm Normal</button>
            <button class="option-btn" data-value="85mm lens, portrait with bokeh" data-i18n-btn="btn_85mm">85mm Portrait</button>
            <button class="option-btn" data-value="135mm telephoto lens, compressed background" data-i18n-btn="btn_135mm">135mm Tele</button>
            <button class="option-btn" data-value="200mm super telephoto, extreme compression" data-i18n-btn="btn_200mm">200mm Super</button>
        </div>

        <label class="sub-label" data-i18n="specialtyLenses">Specialty Lenses</label>
        <div class="option-grid" data-group="specialtyLenses">
            <button class="option-btn" data-value="anamorphic lens, cinematic flares" data-i18n-btn="btn_anamorphic">Anamorphic</button>
            <button class="option-btn" data-value="tilt-shift lens, miniature effect" data-i18n-btn="btn_tiltshift">Tilt-Shift</button>
            <button class="option-btn" data-value="macro lens, extreme detail" data-i18n-btn="btn_macro">Macro</button>
            <button class="option-btn" data-value="soft focus lens, dreamy glow" data-i18n-btn="btn_softfocus">Soft Focus</button>
        </div>
    </div>
</div>

<!-- PANEL 3: CAMERA SHOTS -->
<div class="panel">
    <div class="panel-header">
        <h3>üé¨ <span data-i18n="cameraShots">Camera Shots</span></h3>
        <span class="panel-summary" id="sum-shots"></span>
    </div>
    <div class="panel-content">
        <label class="sub-label" data-i18n="shotSize">Shot Size</label>
        <div class="option-grid" data-group="shotSize">
            <button class="option-btn" data-value="extreme close-up shot, eye or mouth detail" data-i18n-btn="btn_extremecu">Extreme CU</button>
            <button class="option-btn" data-value="close-up shot, facial details" data-i18n-btn="btn_closeup">Close-Up</button>
            <button class="option-btn" data-value="medium shot, waist up" data-i18n-btn="btn_mediumshot">Medium Shot</button>
            <button class="option-btn" data-value="full body shot, complete figure" data-i18n-btn="btn_fullbody">Full Body</button>
            <button class="option-btn" data-value="wide shot, full scene context" data-i18n-btn="btn_wideshot">Wide Shot</button>
            <button class="option-btn" data-value="extreme wide shot, establishing shot" data-i18n-btn="btn_extremewide">Extreme Wide</button>
        </div>

        <label class="sub-label" data-i18n="cameraAngles">Camera Angles</label>
        <div class="option-grid" data-group="cameraAngles">
            <button class="option-btn" data-value="eye level shot, neutral perspective" data-i18n-btn="btn_eyelevel">Eye Level</button>
            <button class="option-btn" data-value="low angle shot, powerful perspective" data-i18n-btn="btn_lowangle">Low Angle</button>
            <button class="option-btn" data-value="high angle shot, vulnerable perspective" data-i18n-btn="btn_highangle">High Angle</button>
            <button class="option-btn" data-value="worm's eye view, extreme low angle" data-i18n-btn="btn_wormseye">Worm's Eye</button>
            <button class="option-btn" data-value="bird's eye view, drone top down" data-i18n-btn="btn_birdseye">Bird's Eye</button>
            <button class="option-btn" data-value="over the shoulder shot, conversation view" data-i18n-btn="btn_overshoulder">Over Shoulder</button>
            <button class="option-btn" data-value="POV shot, first person perspective" data-i18n-btn="btn_pov">POV</button>
            <button class="option-btn" data-value="dutch angle tilt, uneasy atmosphere" data-i18n-btn="btn_dutchangle">Dutch Angle</button>
        </div>
    </div>
</div>

<!-- PANEL 4: CAMERA MOVEMENT -->
<div class="panel">
    <div class="panel-header">
        <h3>üé• <span data-i18n="cameraMovement">Camera Movement</span></h3>
        <span class="panel-summary" id="sum-movement"></span>
    </div>
    <div class="panel-content">
        <label class="sub-label critical" data-i18n="movementNote">Critical for Grok Video - 8s segments max</label>
        <div class="option-grid" data-group="cameraMovement">
            <button class="option-btn" data-value="slow dolly in toward subject" data-i18n-btn="btn_dollyin">Dolly In</button>
            <button class="option-btn" data-value="slow dolly out from subject" data-i18n-btn="btn_dollyout">Dolly Out</button>
            <button class="option-btn" data-value="tracking shot following subject movement" data-i18n-btn="btn_tracking">Tracking</button>
            <button class="option-btn" data-value="slow pan left" data-i18n-btn="btn_panleft">Pan Left</button>
            <button class="option-btn" data-value="slow pan right" data-i18n-btn="btn_panright">Pan Right</button>
            <button class="option-btn" data-value="tilt up to reveal" data-i18n-btn="btn_tiltup">Tilt Up</button>
            <button class="option-btn" data-value="tilt down to ground" data-i18n-btn="btn_tiltdown">Tilt Down</button>
            <button class="option-btn" data-value="360 degree orbit shot around subject" data-i18n-btn="btn_orbit">360¬∞ Orbit</button>
            <button class="option-btn" data-value="crane shot ascending" data-i18n-btn="btn_craneup">Crane Up</button>
            <button class="option-btn" data-value="crane shot descending" data-i18n-btn="btn_cranedown">Crane Down</button>
            <button class="option-btn" data-value="handheld camera shake, documentary style" data-i18n-btn="btn_handheld">Handheld</button>
            <button class="option-btn" data-value="steadicam smooth motion, gliding" data-i18n-btn="btn_steadicam">Steadicam</button>
            <button class="option-btn" data-value="slow zoom in" data-i18n-btn="btn_slowzoom">Slow Zoom</button>
            <button class="option-btn" data-value="snap zoom, dramatic emphasis" data-i18n-btn="btn_snapzoom">Snap Zoom</button>
            <button class="option-btn" data-value="rack focus from foreground to background" data-i18n-btn="btn_rackfocus">Rack Focus</button>
        </div>
    </div>
</div>

<!-- PANEL 5: EYE LINES -->
<div class="panel critical">
    <div class="panel-header">
        <h3>
            üëÅÔ∏è <span data-i18n="eyeLines">Eye Lines</span>
            <span class="panel-priority priority-high" data-i18n="grokCritical">GROK</span>
        </h3>
        <span class="panel-summary" id="sum-eyelines"></span>
    </div>
    <div class="panel-content">
        <div style="background: rgba(0, 212, 255, 0.1); border: 1px solid var(--accent); border-radius: 6px; padding: 12px; margin-bottom: 15px; font-size: 0.8rem; color: var(--text-muted);">
            <strong data-i18n="eyeLinesInfo">Grok breaks fourth wall by default. Specify eye lines to avoid uncanny valley.</strong>
        </div>
        <div class="option-grid" data-group="eyeLines">
            <button class="option-btn" data-value="diegetic eye lines, subject not looking at camera" data-i18n-btn="btn_avoidcamera">Avoid Camera</button>
            <button class="option-btn" data-value="subject looking directly at camera, influencer style" data-i18n-btn="btn_influencer">Influencer</button>
            <button class="option-btn" data-value="subject looking off-camera, natural gaze" data-i18n-btn="btn_offcamera">Off-Camera</button>
            <button class="option-btn" data-value="eyes closed, emotional moment" data-i18n-btn="btn_eyesclosed">Eyes Closed</button>
        </div>
    </div>
</div>

<!-- PANEL 6: LIGHTING -->
<div class="panel">
    <div class="panel-header">
        <h3>üí° <span data-i18n="lighting">Lighting</span></h3>
        <span class="panel-summary" id="sum-lighting"></span>
    </div>
    <div class="panel-content">
        <label class="sub-label" data-i18n="timeOfDay">Time of Day</label>
        <div class="option-grid" data-group="timeOfDay">
            <button class="option-btn" data-value="dawn lighting, soft warm glow" data-i18n-btn="btn_dawn">Dawn</button>
            <button class="option-btn" data-value="midday sun, harsh shadows" data-i18n-btn="btn_midday">Midday</button>
            <button class="option-btn" data-value="sunset glow, golden hour" data-i18n-btn="btn_sunset">Sunset</button>
            <button class="option-btn" data-value="nighttime scene, artificial lights" data-i18n-btn="btn_night">Night</button>
            <button class="option-btn" data-value="blue hour lighting, cool twilight" data-i18n-btn="btn_bluehour">Blue Hour</button>
        </div>

        <label class="sub-label" data-i18n="lightingType">Lighting Type</label>
        <div class="option-grid" data-group="lightingType">
            <button class="option-btn" data-value="dramatic chiaroscuro lighting, high contrast" data-i18n-btn="btn_chiaroscuro">Chiaroscuro</button>
            <button class="option-btn" data-value="softbox lighting, even illumination" data-i18n-btn="btn_softbox">Softbox</button>
            <button class="option-btn" data-value="rim lighting, edge highlight separation" data-i18n-btn="btn_rimlight">Rim Light</button>
            <button class="option-btn" data-value="neon lighting, colorful ambient glow" data-i18n-btn="btn_neon">Neon</button>
            <button class="option-btn" data-value="volumetric lighting, god rays" data-i18n-btn="btn_volumetric">Volumetric</button>
            <button class="option-btn" data-value="natural lighting, sun position accurate" data-i18n-btn="btn_natural">Natural</button>
            <button class="option-btn" data-value="practical lights in scene, motivated sources" data-i18n-btn="btn_practical">Practical</button>
            <button class="option-btn" data-value="motivated lighting from visible sources" data-i18n-btn="btn_motivated">Motivated</button>
        </div>

        <label class="sub-label" data-i18n="mood">Mood & Atmosphere</label>
        <div class="option-grid" data-group="mood">
            <button class="option-btn" data-value="dark atmosphere" data-i18n-btn="btn_dark">Dark</button>
            <button class="option-btn" data-value="epic atmosphere" data-i18n-btn="btn_epic">Epic</button>
            <button class="option-btn" data-value="mysterious atmosphere" data-i18n-btn="btn_mysterious">Mysterious</button>
            <button class="option-btn" data-value="hopeful atmosphere" data-i18n-btn="btn_hopeful">Hopeful</button>
            <button class="option-btn" data-value="melancholic atmosphere" data-i18n-btn="btn_melancholic">Melancholic</button>
            <button class="option-btn" data-value="tense atmosphere" data-i18n-btn="btn_tense">Tense</button>
        </div>
    </div>
</div>

<!-- PANEL 7: OPTICAL EFFECTS -->
<div class="panel">
    <div class="panel-header">
        <h3>üéûÔ∏è <span data-i18n="opticalEffects">Optical Effects</span></h3>
        <span class="panel-summary" id="sum-optical"></span>
    </div>
    <div class="panel-content">
        <div class="option-grid" data-group="opticalEffects">
            <button class="option-btn" data-value="cinematic depth of field, shallow focus" data-i18n-btn="btn_dof">Depth of Field</button>
            <button class="option-btn" data-value="bokeh background blur, creamy out of focus" data-i18n-btn="btn_bokeh">Bokeh</button>
            <button class="option-btn" data-value="film grain texture, 35mm film stock" data-i18n-btn="btn_filmgrain">Film Grain</button>
            <button class="option-btn" data-value="motion blur effect, natural movement" data-i18n-btn="btn_motionblur">Motion Blur</button>
            <button class="option-btn" data-value="lens flare effect, anamorphic streaks" data-i18n-btn="btn_lensflare">Lens Flare</button>
            <button class="option-btn" data-value="slight chromatic aberration, realistic lens" data-i18n-btn="btn_chromatic">Chromatic Aberration</button>
            <button class="option-btn" data-value="subtle vignette, focus attention center" data-i18n-btn="btn_vignette">Vignette</button>
            <button class="option-btn" data-value="bloom effect, highlight glow" data-i18n-btn="btn_bloom">Bloom</button>
            <button class="option-btn" data-value="teal and orange color grading, cinematic" data-i18n-btn="btn_tealorange">Teal & Orange</button>
            <button class="option-btn" data-value="HDR enhanced, high dynamic range" data-i18n-btn="btn_hdr">HDR</button>
        </div>
    </div>
</div>

<!-- PANEL 8: STYLE & RENDER -->
<div class="panel">
    <div class="panel-header">
        <h3>üé® <span data-i18n="visualStyle">Visual Style</span></h3>
        <span class="panel-summary" id="sum-style"></span>
    </div>
    <div class="panel-content">
        <label class="sub-label" data-i18n="artStyle">Art Style</label>
        <div class="option-grid" data-group="artStyle">
            <button class="option-btn" data-value="cinematic photography" data-i18n-btn="btn_cinematic">Cinematic</button>
            <button class="option-btn" data-value="cyberpunk aesthetic" data-i18n-btn="btn_cyberpunk">Cyberpunk</button>
            <button class="option-btn" data-value="ultra realistic, photorealistic" data-i18n-btn="btn_realistic">Realistic</button>
            <button class="option-btn" data-value="anime style" data-i18n-btn="btn_anime">Anime</button>
            <button class="option-btn" data-value="fantasy art" data-i18n-btn="btn_fantasy">Fantasy</button>
            <button class="option-btn" data-value="documentary style" data-i18n-btn="btn_documentary">Documentary</button>
            <button class="option-btn" data-value="music video aesthetic" data-i18n-btn="btn_musicvideo">Music Video</button>
            <button class="option-btn" data-value="commercial advertising style" data-i18n-btn="btn_commercial">Commercial</button>
        </div>

        <label class="sub-label" data-i18n="renderEngine">Render Engine</label>
        <div class="option-grid" data-group="renderEngine">
            <button class="option-btn" data-value="Unreal Engine 5 render" data-i18n-btn="btn_unreal5">Unreal 5</button>
            <button class="option-btn" data-value="Octane render" data-i18n-btn="btn_octane">Octane</button>
            <button class="option-btn" data-value="Redshift render" data-i18n-btn="btn_redshift">Redshift</button>
        </div>

        <label class="sub-label critical" data-i18n="grokTerms">Grok-Specific Terms (CRITICAL)</label>
        <div class="option-grid" data-group="grokTerms">
            <button class="option-btn" data-value="subsurface scattering for organic materials" data-i18n-btn="btn_subsurface">Subsurface Scattering</button>
            <button class="option-btn" data-value="natural skin pores and textures" data-i18n-btn="btn_skindetails">Skin Details</button>
            <button class="option-btn" data-value="uncanny valley neutralization" data-i18n-btn="btn_antiuncanny">Anti-Uncanny</button>
            <button class="option-btn" data-value="individual hair strands, realistic" data-i18n-btn="btn_hairdetails">Hair Details</button>
        </div>
    </div>
</div>

<!-- PANEL 9: ENVIRONMENT & PHYSICS -->
<div class="panel">
    <div class="panel-header">
        <h3>üåç <span data-i18n="environment">Environment & Physics</span></h3>
        <span class="panel-summary" id="sum-environment"></span>
    </div>
    <div class="panel-content">
        <label class="sub-label" data-i18n="location">Location</label>
        <textarea id="location" placeholder="e.g. rain-soaked neon cityscape with reflections..." oninput="updateSummary()"></textarea>

        <label class="sub-label" data-i18n="biome">Biome</label>
        <div class="option-grid" data-group="biome">
            <button class="option-btn" data-value="forest environment" data-i18n-btn="btn_forest">Forest</button>
            <button class="option-btn" data-value="desert environment" data-i18n-btn="btn_desert">Desert</button>
            <button class="option-btn" data-value="futuristic cityscape" data-i18n-btn="btn_city">City</button>
            <button class="option-btn" data-value="mountain region" data-i18n-btn="btn_mountain">Mountain</button>
            <button class="option-btn" data-value="outer space" data-i18n-btn="btn_space">Space</button>
            <button class="option-btn" data-value="interior scene" data-i18n-btn="btn_interior">Interior</button>
            <button class="option-btn" data-value="underwater environment" data-i18n-btn="btn_underwater">Underwater</button>
        </div>

        <label class="sub-label critical" data-i18n="physicalDynamics">Physical Dynamics (LAYER 4)</label>
        <div class="option-grid" data-group="physicalDynamics">
            <button class="option-btn" data-value="wind affecting clothing and hair, realistic physics" data-i18n-btn="btn_wind">Wind</button>
            <button class="option-btn" data-value="rainy weather, water droplets on surfaces" data-i18n-btn="btn_rain">Rain</button>
            <button class="option-btn" data-value="foggy atmosphere, volumetric mist" data-i18n-btn="btn_fog">Fog</button>
            <button class="option-btn" data-value="smoke particles, atmospheric haze" data-i18n-btn="btn_smoke">Smoke</button>
            <button class="option-btn" data-value="fire embers, heat distortion" data-i18n-btn="btn_fire">Fire</button>
            <button class="option-btn" data-value="water splashes, fluid dynamics" data-i18n-btn="btn_water">Water</button>
            <button class="option-btn" data-value="dust particles in light rays" data-i18n-btn="btn_dust">Dust</button>
            <button class="option-btn" data-value="snowing weather, snowflakes falling" data-i18n-btn="btn_snow">Snow</button>
            <button class="option-btn" data-value="fabric flowing in wind, realistic cloth simulation" data-i18n-btn="btn_fabric">Fabric</button>
        </div>
    </div>
</div>

<!-- PANEL 10: COMPOSITION -->
<div class="panel">
    <div class="panel-header">
        <h3>üìê <span data-i18n="composition">Composition</span></h3>
        <span class="panel-summary" id="sum-composition"></span>
    </div>
    <div class="panel-content">
        <div class="option-grid" data-group="composition">
            <button class="option-btn" data-value="rule of thirds composition" data-i18n-btn="btn_ruleofthirds">Rule of Thirds</button>
            <button class="option-btn" data-value="centered composition, symmetrical" data-i18n-btn="btn_centered">Centered</button>
            <button class="option-btn" data-value="leading lines guiding to subject" data-i18n-btn="btn_leadinglines">Leading Lines</button>
            <button class="option-btn" data-value="frame within frame composition" data-i18n-btn="btn_framewithin">Frame Within</button>
            <button class="option-btn" data-value="negative space, minimalist composition" data-i18n-btn="btn_negativespace">Negative Space</button>
            <button class="option-btn" data-value="golden ratio composition" data-i18n-btn="btn_goldenratio">Golden Ratio</button>
        </div>
    </div>
</div>

<!-- PANEL 11: QUALITY & RESOLUTION (PREMIUM) -->
<div class="panel premium">
    <div class="panel-header">
        <h3>
            üíé <span data-i18n="qualityPanel">Quality & Resolution</span>
            <span class="panel-priority priority-premium" data-i18n="premium">PREMIUM</span>
        </h3>
        <span class="panel-summary" id="sum-quality"></span>
    </div>
    <div class="panel-content">
        <div style="background: rgba(255, 215, 0, 0.1); border: 1px solid var(--gold); border-radius: 6px; padding: 12px; margin-bottom: 15px; font-size: 0.8rem; color: var(--gold);">
            <strong>‚ö†Ô∏è NOTE:</strong> <span data-i18n="qualityNote">Grok native output is 720p HD. 4K/8K keywords enhance detail but require upscaling in post-production for actual higher resolution.</span>
        </div>

        <label class="sub-label premium" data-i18n="resolution">Resolution Modifiers</label>
        <div class="option-grid" data-group="resolution">
            <button class="option-btn premium" data-value="720p HD" data-i18n-btn="btn_720p">720p HD (Native)</button>
            <button class="option-btn premium" data-value="4K resolution, ultra detailed" data-i18n-btn="btn_4k">4K Enhanced</button>
            <button class="option-btn premium" data-value="8K resolution, maximum detail" data-i18n-btn="btn_8k">8K Maximum</button>
        </div>

        <label class="sub-label premium" data-i18n="qualityModifiers">Quality Modifiers</label>
        <div class="option-grid" data-group="qualityModifiers">
            <button class="option-btn premium" data-value="ultra realistic, photorealistic" data-i18n-btn="btn_ultrarealistic">Ultra Realistic</button>
            <button class="option-btn premium" data-value="high detail, intricate details" data-i18n-btn="btn_highdetail">High Detail</button>
            <button class="option-btn premium" data-value="masterpiece quality" data-i18n-btn="btn_masterpiece">Masterpiece</button>
            <button class="option-btn premium" data-value="award winning photography" data-i18n-btn="btn_awardwinning">Award Winning</button>
            <button class="option-btn premium" data-value="professional grade" data-i18n-btn="btn_professional">Professional</button>
            <button class="option-btn premium" data-value="studio quality" data-i18n-btn="btn_studioquality">Studio Quality</button>
            <button class="option-btn premium" data-value="crystal clear, sharp focus" data-i18n-btn="btn_crystalclear">Crystal Clear</button>
            <button class="option-btn premium" data-value="HDR enhanced, high dynamic range" data-i18n-btn="btn_hdrenhanced">HDR Enhanced</button>
        </div>

        <label class="sub-label premium" data-i18n="detailEnhancers">Detail Enhancers</label>
        <div class="option-grid" data-group="detailEnhancers">
            <button class="option-btn premium" data-value="intricate details, fine textures" data-i18n-btn="btn_intricatedetails">Intricate Details</button>
            <button class="option-btn premium" data-value="hyper detailed, micro details" data-i18n-btn="btn_hyperdetailed">Hyper Detailed</button>
            <button class="option-btn premium" data-value="sharp focus, crisp edges" data-i18n-btn="btn_sharpfocus">Sharp Focus</button>
            <button class="option-btn premium" data-value="rich colors, vibrant palette" data-i18n-btn="btn_richcolors">Rich Colors</button>
            <button class="option-btn premium" data-value="premium texture quality" data-i18n-btn="btn_premiumtextures">Premium Textures</button>
        </div>
    </div>
</div>

<!-- PANEL 12: OUTPUT SETTINGS -->
<div class="panel">
    <div class="panel-header">
        <h3>‚öôÔ∏è <span data-i18n="output">Output Settings</span></h3>
        <span class="panel-summary" id="sum-output"></span>
    </div>
    <div class="panel-content">
        <div class="info-alert" style="margin-bottom: 15px; padding: 10px;">
            <span class="info-alert-icon">üìä</span>
            <div class="info-alert-content">
                <strong>Grok Optimal:</strong> 720p HD, 8-second segments for perfect lip-sync, ~180 credits/video
            </div>
        </div>

        <label class="sub-label" data-i18n="aspectRatio">Aspect Ratio</label>
        <div class="option-grid" data-group="aspectRatio">
            <button class="option-btn" data-value="--ar 16:9" data-i18n-btn="btn_169">16:9 (YouTube)</button>
            <button class="option-btn" data-value="--ar 9:16" data-i18n-btn="btn_916">9:16 (TikTok/Reels)</button>
            <button class="option-btn" data-value="--ar 1:1" data-i18n-btn="btn_11">1:1 (Square)</button>
            <button class="option-btn" data-value="--ar 21:9" data-i18n-btn="btn_219">21:9 (Cinema)</button>
            <button class="option-btn" data-value="--ar 4:3" data-i18n-btn="btn_43">4:3 (Classic)</button>
        </div>

        <label class="sub-label" data-i18n="duration">Duration</label>
        <div class="option-grid" data-group="duration">
            <button class="option-btn" data-value="8 second segment for lip-sync" data-i18n-btn="btn_8s">8s (Dialogue)</button>
            <button class="option-btn" data-value="15 second max duration" data-i18n-btn="btn_15s">15s (Max)</button>
        </div>
    </div>
</div>

<!-- PANEL 13: AUDIO -->
<div class="panel">
    <div class="panel-header">
        <h3>üîä <span data-i18n="audio">Audio Composition</span></h3>
        <span class="panel-summary" id="sum-audio"></span>
    </div>
    <div class="panel-content">
        <div class="option-grid" data-group="audio">
            <button class="option-btn" data-value="soft ambient soundtrack, atmospheric" data-i18n-btn="btn_ambient">Ambient</button>
            <button class="option-btn" data-value="epic orchestral music, cinematic score" data-i18n-btn="btn_orchestral">Orchestral</button>
            <button class="option-btn" data-value="dialogue heavy scene, clear speech" data-i18n-btn="btn_dialogue">Dialogue</button>
            <button class="option-btn" data-value="dramatic sound effects, impactful" data-i18n-btn="btn_soundfx">Sound FX</button>
            <button class="option-btn" data-value="moment of silence, tension building" data-i18n-btn="btn_silence">Silence</button>
            <button class="option-btn" data-value="voice over narration, documentary style" data-i18n-btn="btn_voiceover">Voice Over</button>
            <button class="option-btn" data-value="music swell, emotional crescendo" data-i18n-btn="btn_musicswell">Music Swell</button>
        </div>
    </div>
</div>

<!-- PANEL 14: NEGATIVE PROMPT -->
<div class="panel critical">
    <div class="panel-header">
        <h3>
            ‚õî <span data-i18n="negative">Negative Prompt</span>
            <span class="panel-priority priority-critical" data-i18n="autoIncluded">AUTO</span>
        </h3>
        <span class="panel-summary" id="sum-negative"></span>
    </div>
    <div class="panel-content">
        <div class="info-alert" style="margin-bottom: 15px; padding: 10px; border-color: var(--warning); background: rgba(255, 170, 0, 0.08);">
            <span class="info-alert-icon">‚ö†Ô∏è</span>
            <div class="info-alert-content">
                <strong data-i18n="negativeWarning">Grok Bias:</strong> Automatically adds [No subtitles, No text, No closed captions] to prevent burnt-in text artifacts
            </div>
        </div>

        <label class="sub-label" data-i18n="customNegative">Custom Negative</label>
        <textarea id="negative" placeholder="Additional elements to avoid..." oninput="updateSummary()"></textarea>

        <label class="sub-label" data-i18n="quickNegative">Quick Negative</label>
        <div class="option-grid" data-group="negQuick">
            <button class="option-btn" data-value="blurry, low resolution" data-i18n-btn="btn_noblur">No Blur</button>
            <button class="option-btn" data-value="ugly, deformed hands and face" data-i18n-btn="btn_nodeformed">No Deformed</button>
            <button class="option-btn" data-value="extra limbs, bad anatomy" data-i18n-btn="btn_nobadanatomy">No Bad Anatomy</button>
            <button class="option-btn" data-value="watermark, signature" data-i18n-btn="btn_nowatermark">No Watermark</button>
            <button class="option-btn" data-value="cartoon, 3d render" data-i18n-btn="btn_nocartoon">No Cartoon</button>
        </div>
    </div>
</div>

<!-- PANEL 15: SPICY MODE -->
<div class="panel">
    <div class="panel-header">
        <h3>üå∂Ô∏è <span data-i18n="spicyMode">Spicy Mode</span></h3>
        <span class="panel-summary" id="sum-spicy"></span>
    </div>
    <div class="panel-content">
        <div class="spicy-warning">
            <strong>‚ö†Ô∏è Premium+ Required:</strong> SuperGrok subscription, age verification (18+). 
            Artistic nudity allowed. NO deepfakes, minors, or explicit acts.
        </div>

        <div class="spicy-toggle">
            <div class="toggle-switch" id="spicyToggle" onclick="toggleSpicyMode()"></div>
            <span style="font-size: 0.85rem; color: var(--text-muted);" data-i18n="enableSpicy">Enable Spicy Mode</span>
        </div>

        <div id="spicyContent" style="display: none;">
            <label class="sub-label danger" data-i18n="spicyOptions">Moderation Techniques</label>
            <div class="option-grid" data-group="spicy">
                <button class="option-btn" data-value="anime stickers for coverage" data-i18n-btn="btn_animestickers">Anime Stickers</button>
                <button class="option-btn" data-value="2D hearts for occlusion" data-i18n-btn="btn_2dhearts">2D Hearts</button>
                <button class="option-btn" data-value="lingerie pasties" data-i18n-btn="btn_lingeriepasties">Lingerie Pasties</button>
                <button class="option-btn" data-value="artistic nudity, tasteful" data-i18n-btn="btn_artisticnudity">Artistic Nudity</button>
            </div>

            <label class="sub-label danger" data-i18n="spicyWarning">Legal Warning</label>
            <textarea readonly style="font-size: 0.75rem; color: var(--warning);">ICO investigation 2026. Brand safety risk. Use responsibly. No deepfakes or minors.</textarea>
        </div>
    </div>
</div>

</div>

<!-- FIXED OUTPUT AREA -->
<div class="output-area">
    <div class="output-header">
        <div class="output-title">
            üìù <span data-i18n="finalPrompt">Final Prompt (Always in English)</span>
            <span class="grok-structure-hint" data-i18n="structureHint">Subject‚ÜíAction‚ÜíOptics; Lighting; Physics</span>
        </div>
        <span class="grok-badge" id="langIndicator">EN OUTPUT</span>
    </div>

    <div class="output-controls">
        <button class="btn btn-random" onclick="randomize()">
            üé≤ <span data-i18n="random">Random</span>
        </button>
        <button class="btn btn-primary" onclick="generatePrompt()">
            ‚ö° <span data-i18n="generate">Generate</span>
        </button>
        <button class="btn btn-secondary" onclick="copyPrompt()">
            üìã <span data-i18n="copy">Copy</span>
        </button>
        <button class="btn btn-secondary" onclick="clearAll()">
            üóëÔ∏è <span data-i18n="clear">Clear</span>
        </button>
    </div>

    <textarea id="result" readonly placeholder="Your Grok-optimized prompt will appear here..."></textarea>
    
    <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.75rem; color: var(--text-muted);">
        <span data-i18n="creditsInfo">~180 credits per video</span>
        <span data-i18n="optimalSettings">Optimal: 720p, 8s segments | P50: 15-20s latency</span>
    </div>
</div>

<script>
    // --- TRANSLATIONS ---
    const translations = {
        en: {
            subtitle: "Imagine 1.0 | Aurora Engine",
            active: "Active:",
            alertTitle: "Grok Protocol Active:",
            alertText: "Subject + Action MUST be FIRST (logarithmic weight). Negative prompts auto-included. Optimal: 720p, 8s segments for perfect lip-sync.",
            subject: "Subject & Action",
            priorityCritical: "LAYER 1",
            subjectWarning: "These tokens have LOGARITHMIC WEIGHT. Must be FIRST in prompt for Grok Aurora engine.",
            mainSubject: "Main Subject (FIRST in prompt)",
            action: "Primary Action",
            characterDNA: "Character DNA (Immutable Traits)",
            lensLibrary: "Lens Library",
            focalLength: "Focal Length",
            specialtyLenses: "Specialty Lenses",
            cameraShots: "Camera Shots",
            shotSize: "Shot Size",
            cameraAngles: "Camera Angles",
            cameraMovement: "Camera Movement",
            movementNote: "Critical for Grok Video - 8s segments max",
            eyeLines: "Eye Lines",
            grokCritical: "GROK",
            eyeLinesInfo: "Grok breaks fourth wall by default. Specify eye lines to avoid uncanny valley.",
            lighting: "Lighting",
            timeOfDay: "Time of Day",
            lightingType: "Lighting Type",
            mood: "Mood & Atmosphere",
            opticalEffects: "Optical Effects",
            visualStyle: "Visual Style",
            artStyle: "Art Style",
            renderEngine: "Render Engine",
            grokTerms: "Grok-Specific Terms (CRITICAL)",
            environment: "Environment & Physics",
            location: "Location",
            biome: "Biome",
            physicalDynamics: "Physical Dynamics (LAYER 4)",
            composition: "Composition",
            qualityPanel: "Quality & Resolution",
            premium: "PREMIUM",
            qualityNote: "Grok native output is 720p HD. 4K/8K keywords enhance detail but require upscaling in post-production for actual higher resolution.",
            resolution: "Resolution Modifiers",
            qualityModifiers: "Quality Modifiers",
            detailEnhancers: "Detail Enhancers",
            output: "Output Settings",
            aspectRatio: "Aspect Ratio",
            duration: "Duration",
            audio: "Audio Composition",
            negative: "Negative Prompt",
            autoIncluded: "AUTO",
            negativeWarning: "Grok Bias:",
            customNegative: "Custom Negative",
            quickNegative: "Quick Negative",
            spicyMode: "Spicy Mode",
            enableSpicy: "Enable Spicy Mode",
            spicyOptions: "Moderation Techniques",
            spicyWarning: "Legal Warning",
            finalPrompt: "Final Prompt (Always in English)",
            structureHint: "Subject‚ÜíAction‚ÜíOptics; Lighting; Physics",
            random: "Random",
            generate: "Generate",
            copy: "Copy",
            clear: "Clear",
            creditsInfo: "~180 credits per video",
            optimalSettings: "Optimal: 720p, 8s segments | P50: 15-20s latency",
            placeholderSubject: "e.g. A cybernetic warrior with neon tattoos and natural skin pores...",
            placeholderAction: "e.g. walking through rain-soaked neon streets with wind affecting clothing...",
            placeholderDNA: "Age, ethnicity, voice tone, exact features for consistency...",
            placeholderLocation: "e.g. rain-soaked neon cityscape with reflections...",
            placeholderNegative: "Additional elements to avoid...",
            resultPlaceholder: "Your Grok-optimized prompt will appear here...",
            
            // === BUTTONS ===
            btn_14mm: "14mm Fisheye",
            btn_24mm: "24mm Wide",
            btn_35mm: "35mm Standard",
            btn_50mm: "50mm Normal",
            btn_85mm: "85mm Portrait",
            btn_135mm: "135mm Tele",
            btn_200mm: "200mm Super",
            btn_anamorphic: "Anamorphic",
            btn_tiltshift: "Tilt-Shift",
            btn_macro: "Macro",
            btn_softfocus: "Soft Focus",
            btn_extremecu: "Extreme CU",
            btn_closeup: "Close-Up",
            btn_mediumshot: "Medium Shot",
            btn_fullbody: "Full Body",
            btn_wideshot: "Wide Shot",
            btn_extremewide: "Extreme Wide",
            btn_eyelevel: "Eye Level",
            btn_lowangle: "Low Angle",
            btn_highangle: "High Angle",
            btn_wormseye: "Worm's Eye",
            btn_birdseye: "Bird's Eye",
            btn_overshoulder: "Over Shoulder",
            btn_pov: "POV",
            btn_dutchangle: "Dutch Angle",
            btn_dollyin: "Dolly In",
            btn_dollyout: "Dolly Out",
            btn_tracking: "Tracking",
            btn_panleft: "Pan Left",
            btn_panright: "Pan Right",
            btn_tiltup: "Tilt Up",
            btn_tiltdown: "Tilt Down",
            btn_orbit: "360¬∞ Orbit",
            btn_craneup: "Crane Up",
            btn_cranedown: "Crane Down",
            btn_handheld: "Handheld",
            btn_steadicam: "Steadicam",
            btn_slowzoom: "Slow Zoom",
            btn_snapzoom: "Snap Zoom",
            btn_rackfocus: "Rack Focus",
            btn_avoidcamera: "Avoid Camera",
            btn_influencer: "Influencer",
            btn_offcamera: "Off-Camera",
            btn_eyesclosed: "Eyes Closed",
            btn_dawn: "Dawn",
            btn_midday: "Midday",
            btn_sunset: "Sunset",
            btn_night: "Night",
            btn_bluehour: "Blue Hour",
            btn_chiaroscuro: "Chiaroscuro",
            btn_softbox: "Softbox",
            btn_rimlight: "Rim Light",
            btn_neon: "Neon",
            btn_volumetric: "Volumetric",
            btn_natural: "Natural",
            btn_practical: "Practical",
            btn_motivated: "Motivated",
            btn_dark: "Dark",
            btn_epic: "Epic",
            btn_mysterious: "Mysterious",
            btn_hopeful: "Hopeful",
            btn_melancholic: "Melancholic",
            btn_tense: "Tense",
            btn_dof: "Depth of Field",
            btn_bokeh: "Bokeh",
            btn_filmgrain: "Film Grain",
            btn_motionblur: "Motion Blur",
            btn_lensflare: "Lens Flare",
            btn_chromatic: "Chromatic Aberration",
            btn_vignette: "Vignette",
            btn_bloom: "Bloom",
            btn_tealorange: "Teal & Orange",
            btn_hdr: "HDR",
            btn_cinematic: "Cinematic",
            btn_cyberpunk: "Cyberpunk",
            btn_realistic: "Realistic",
            btn_anime: "Anime",
            btn_fantasy: "Fantasy",
            btn_documentary: "Documentary",
            btn_musicvideo: "Music Video",
            btn_commercial: "Commercial",
            btn_unreal5: "Unreal 5",
            btn_octane: "Octane",
            btn_redshift: "Redshift",
            btn_subsurface: "Subsurface Scattering",
            btn_skindetails: "Skin Details",
            btn_antiuncanny: "Anti-Uncanny",
            btn_hairdetails: "Hair Details",
            btn_forest: "Forest",
            btn_desert: "Desert",
            btn_city: "City",
            btn_mountain: "Mountain",
            btn_space: "Space",
            btn_interior: "Interior",
            btn_underwater: "Underwater",
            btn_wind: "Wind",
            btn_rain: "Rain",
            btn_fog: "Fog",
            btn_smoke: "Smoke",
            btn_fire: "Fire",
            btn_water: "Water",
            btn_dust: "Dust",
            btn_snow: "Snow",
            btn_fabric: "Fabric",
            btn_ruleofthirds: "Rule of Thirds",
            btn_centered: "Centered",
            btn_leadinglines: "Leading Lines",
            btn_framewithin: "Frame Within",
            btn_negativespace: "Negative Space",
            btn_goldenratio: "Golden Ratio",
            btn_720p: "720p HD (Native)",
            btn_4k: "4K Enhanced",
            btn_8k: "8K Maximum",
            btn_ultrarealistic: "Ultra Realistic",
            btn_highdetail: "High Detail",
            btn_masterpiece: "Masterpiece",
            btn_awardwinning: "Award Winning",
            btn_professional: "Professional",
            btn_studioquality: "Studio Quality",
            btn_crystalclear: "Crystal Clear",
            btn_hdrenhanced: "HDR Enhanced",
            btn_intricatedetails: "Intricate Details",
            btn_hyperdetailed: "Hyper Detailed",
            btn_sharpfocus: "Sharp Focus",
            btn_richcolors: "Rich Colors",
            btn_premiumtextures: "Premium Textures",
            btn_169: "16:9 (YouTube)",
            btn_916: "9:16 (TikTok/Reels)",
            btn_11: "1:1 (Square)",
            btn_219: "21:9 (Cinema)",
            btn_43: "4:3 (Classic)",
            btn_8s: "8s (Dialogue)",
            btn_15s: "15s (Max)",
            btn_ambient: "Ambient",
            btn_orchestral: "Orchestral",
            btn_dialogue: "Dialogue",
            btn_soundfx: "Sound FX",
            btn_silence: "Silence",
            btn_voiceover: "Voice Over",
            btn_musicswell: "Music Swell",
            btn_noblur: "No Blur",
            btn_nodeformed: "No Deformed",
            btn_nobadanatomy: "No Bad Anatomy",
            btn_nowatermark: "No Watermark",
            btn_nocartoon: "No Cartoon",
            btn_animestickers: "Anime Stickers",
            btn_2dhearts: "2D Hearts",
            btn_lingeriepasties: "Lingerie Pasties",
            btn_artisticnudity: "Artistic Nudity"
        },
        es: {
            subtitle: "Imagine 1.0 | Motor Aurora",
            active: "Activo:",
            alertTitle: "Protocolo Grok Activo:",
            alertText: "Sujeto + Acci√≥n DEBEN ir PRIMERO (peso logar√≠tmico). Negativos auto-incluidos. √ìptimo: 720p, segmentos de 8s para lip-sync perfecto.",
            subject: "Sujeto y Acci√≥n",
            priorityCritical: "CAPA 1",
            subjectWarning: "Estos tokens tienen PESO LOGAR√çTMICO. Deben ir PRIMERO en el prompt para el motor Aurora de Grok.",
            mainSubject: "Sujeto Principal (PRIMERO en el prompt)",
            action: "Acci√≥n Principal",
            characterDNA: "DNA del Personaje (Rasgos Inmutables)",
            lensLibrary: "Librer√≠a de Lentes",
            focalLength: "Distancia Focal",
            specialtyLenses: "Lentes Especiales",
            cameraShots: "Tomas de C√°mara",
            shotSize: "Tama√±o de Toma",
            cameraAngles: "√Ångulos de C√°mara",
            cameraMovement: "Movimiento de C√°mara",
            movementNote: "Cr√≠tico para Video Grok - m√°x 8s segmentos",
            eyeLines: "L√≠neas de Ojos",
            grokCritical: "GROK",
            eyeLinesInfo: "Grok rompe la cuarta pared por defecto. Especifica l√≠neas de ojos para evitar uncanny valley.",
            lighting: "Iluminaci√≥n",
            timeOfDay: "Momento del D√≠a",
            lightingType: "Tipo de Iluminaci√≥n",
            mood: "Estado de √Ånimo y Atm√≥sfera",
            opticalEffects: "Efectos √ìpticos",
            visualStyle: "Estilo Visual",
            artStyle: "Estilo de Arte",
            renderEngine: "Motor de Render",
            grokTerms: "T√©rminos Espec√≠ficos de Grok (CR√çTICO)",
            environment: "Entorno y F√≠sica",
            location: "Ubicaci√≥n",
            biome: "Bioma",
            physicalDynamics: "Din√°micas F√≠sicas (CAPA 4)",
            composition: "Composici√≥n",
            qualityPanel: "Calidad y Resoluci√≥n",
            premium: "PREMIUM",
            qualityNote: "La salida nativa de Grok es 720p HD. Las palabras clave 4K/8K mejoran el detalle pero requieren upscaling en post-producci√≥n para resoluci√≥n real mayor.",
            resolution: "Modificadores de Resoluci√≥n",
            qualityModifiers: "Modificadores de Calidad",
            detailEnhancers: "Mejoradores de Detalle",
            output: "Configuraci√≥n de Salida",
            aspectRatio: "Proporci√≥n de Aspecto",
            duration: "Duraci√≥n",
            audio: "Composici√≥n de Audio",
            negative: "Prompt Negativo",
            autoIncluded: "AUTO",
            negativeWarning: "Sesgo de Grok:",
            customNegative: "Negativo Personalizado",
            quickNegative: "Negativo R√°pido",
            spicyMode: "Modo Spicy",
            enableSpicy: "Activar Modo Spicy",
            spicyOptions: "T√©cnicas de Moderaci√≥n",
            spicyWarning: "Advertencia Legal",
            finalPrompt: "Prompt Final (Siempre en Ingl√©s)",
            structureHint: "Sujeto‚ÜíAcci√≥n‚Üí√ìptica; Iluminaci√≥n; F√≠sica",
            random: "Aleatorio",
            generate: "Generar",
            copy: "Copiar",
            clear: "Limpiar",
            creditsInfo: "~180 cr√©ditos por video",
            optimalSettings: "√ìptimo: 720p, 8s segmentos | P50: 15-20s latencia",
            placeholderSubject: "ej. Un guerrero cibern√©tico con tatuajes de ne√≥n y poros naturales...",
            placeholderAction: "ej. caminando por calles de ne√≥n empapadas con viento afectando la ropa...",
            placeholderDNA: "Edad, etnia, tono de voz, rasgos exactos para consistencia...",
            placeholderLocation: "ej. paisaje urbano de ne√≥n empapado con reflejos...",
            placeholderNegative: "Elementos adicionales a evitar...",
            resultPlaceholder: "Tu prompt optimizado para Grok aparecer√° aqu√≠...",
            
            // === BOTONES ===
            btn_14mm: "14mm Ojo de Pez",
            btn_24mm: "24mm Gran Angular",
            btn_35mm: "35mm Est√°ndar",
            btn_50mm: "50mm Normal",
            btn_85mm: "85mm Retrato",
            btn_135mm: "135mm Teleobjetivo",
            btn_200mm: "200mm Super Tele",
            btn_anamorphic: "Anam√≥rfico",
            btn_tiltshift: "Tilt-Shift",
            btn_macro: "Macro",
            btn_softfocus: "Enfoque Suave",
            btn_extremecu: "Primer√≠simo Plano",
            btn_closeup: "Primer Plano",
            btn_mediumshot: "Plano Medio",
            btn_fullbody: "Plano Entero",
            btn_wideshot: "Plano General",
            btn_extremewide: "Plano Muy General",
            btn_eyelevel: "A Nivel de Ojos",
            btn_lowangle: "√Ångulo Bajo",
            btn_highangle: "√Ångulo Alto",
            btn_wormseye: "Vista de Gusano",
            btn_birdseye: "Vista de P√°jaro",
            btn_overshoulder: "Sobre el Hombro",
            btn_pov: "Primera Persona",
            btn_dutchangle: "√Ångulo Holand√©s",
            btn_dollyin: "Acercamiento",
            btn_dollyout: "Alejamiento",
            btn_tracking: "Seguimiento",
            btn_panleft: "Giro Izquierda",
            btn_panright: "Giro Derecha",
            btn_tiltup: "Inclinaci√≥n Arriba",
            btn_tiltdown: "Inclinaci√≥n Abajo",
            btn_orbit: "√ìrbita 360¬∞",
            btn_craneup: "Gr√∫a Sube",
            btn_cranedown: "Gr√∫a Baja",
            btn_handheld: "C√°mara en Mano",
            btn_steadicam: "Steadicam",
            btn_slowzoom: "Zoom Lento",
            btn_snapzoom: "Zoom R√°pido",
            btn_rackfocus: "Cambio de Foco",
            btn_avoidcamera: "Evitar C√°mara",
            btn_influencer: "Estilo Influencer",
            btn_offcamera: "Mirada Fuera",
            btn_eyesclosed: "Ojos Cerrados",
            btn_dawn: "Amanecer",
            btn_midday: "Mediod√≠a",
            btn_sunset: "Atardecer",
            btn_night: "Noche",
            btn_bluehour: "Hora Azul",
            btn_chiaroscuro: "Claroscuro",
            btn_softbox: "Softbox",
            btn_rimlight: "Luz de Borde",
            btn_neon: "Ne√≥n",
            btn_volumetric: "Volum√©trico",
            btn_natural: "Natural",
            btn_practical: "Pr√°ctica",
            btn_motivated: "Motivada",
            btn_dark: "Oscuro",
            btn_epic: "√âpico",
            btn_mysterious: "Misterioso",
            btn_hopeful: "Esperanzador",
            btn_melancholic: "Melanc√≥lico",
            btn_tense: "Tenso",
            btn_dof: "Profundidad de Campo",
            btn_bokeh: "Bokeh",
            btn_filmgrain: "Grano de Pel√≠cula",
            btn_motionblur: "Motion Blur",
            btn_lensflare: "Lens Flare",
            btn_chromatic: "Aberraci√≥n Crom√°tica",
            btn_vignette: "Vi√±eta",
            btn_bloom: "Bloom",
            btn_tealorange: "Teal y Naranja",
            btn_hdr: "HDR",
            btn_cinematic: "Cinematogr√°fico",
            btn_cyberpunk: "Cyberpunk",
            btn_realistic: "Realista",
            btn_anime: "Anime",
            btn_fantasy: "Fantas√≠a",
            btn_documentary: "Documental",
            btn_musicvideo: "Video Musical",
            btn_commercial: "Publicitario",
            btn_unreal5: "Unreal 5",
            btn_octane: "Octane",
            btn_redshift: "Redshift",
            btn_subsurface: "Dispersi√≥n Subsuperficial",
            btn_skindetails: "Detalles de Piel",
            btn_antiuncanny: "Anti-Uncanny",
            btn_hairdetails: "Detalles de Cabello",
            btn_forest: "Bosque",
            btn_desert: "Desierto",
            btn_city: "Ciudad",
            btn_mountain: "Monta√±a",
            btn_space: "Espacio",
            btn_interior: "Interior",
            btn_underwater: "Submarino",
            btn_wind: "Viento",
            btn_rain: "Lluvia",
            btn_fog: "Niebla",
            btn_smoke: "Humo",
            btn_fire: "Fuego",
            btn_water: "Agua",
            btn_dust: "Polvo",
            btn_snow: "Nieve",
            btn_fabric: "Telas",
            btn_ruleofthirds: "Regla de Tercios",
            btn_centered: "Centrado",
            btn_leadinglines: "L√≠neas Gu√≠a",
            btn_framewithin: "Marco Dentro",
            btn_negativespace: "Espacio Negativo",
            btn_goldenratio: "Proporci√≥n √Åurea",
            btn_720p: "720p HD (Nativo)",
            btn_4k: "4K Mejorado",
            btn_8k: "8K M√°ximo",
            btn_ultrarealistic: "Ultra Realista",
            btn_highdetail: "Alto Detalle",
            btn_masterpiece: "Obra Maestra",
            btn_awardwinning: "Premiado",
            btn_professional: "Profesional",
            btn_studioquality: "Calidad Estudio",
            btn_crystalclear: "Cristalino",
            btn_hdrenhanced: "HDR Mejorado",
            btn_intricatedetails: "Detalles Intrincados",
            btn_hyperdetailed: "Hiper Detallado",
            btn_sharpfocus: "Enfoque N√≠tido",
            btn_richcolors: "Colores Ricos",
            btn_premiumtextures: "Texturas Premium",
            btn_169: "16:9 (YouTube)",
            btn_916: "9:16 (TikTok/Reels)",
            btn_11: "1:1 (Cuadrado)",
            btn_219: "21:9 (Cine)",
            btn_43: "4:3 (Cl√°sico)",
            btn_8s: "8s (Di√°logo)",
            btn_15s: "15s (M√°x)",
            btn_ambient: "Ambiente",
            btn_orchestral: "Orquestal",
            btn_dialogue: "Di√°logo",
            btn_soundfx: "Efectos Sonoros",
            btn_silence: "Silencio",
            btn_voiceover: "Narraci√≥n",
            btn_musicswell: "Crescendo Musical",
            btn_noblur: "Sin Blur",
            btn_nodeformed: "Sin Deformaciones",
            btn_nobadanatomy: "Sin Anatom√≠a",
            btn_nowatermark: "Sin Marca de Agua",
            btn_nocartoon: "Sin Cartoon",
            btn_animestickers: "Stickers Anime",
            btn_2dhearts: "Corazones 2D",
            btn_lingeriepasties: "Pasties Lencer√≠a",
            btn_artisticnudity: "Desnudo Art√≠stico"
        }
    };

    let currentLang = 'en';
    let spicyModeEnabled = false;

    // --- LANGUAGE SWITCH ---
    function setLanguage(lang) {
        currentLang = lang;
        
        document.getElementById('btn-en').classList.toggle('active', lang === 'en');
        document.getElementById('btn-es').classList.toggle('active', lang === 'es');
        
        // Translate elements with data-i18n
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if(translations[lang][key]) {
                el.textContent = translations[lang][key];
            }
        });
        
        // Translate BUTTONS with data-i18n-btn
        document.querySelectorAll('[data-i18n-btn]').forEach(btn => {
            const key = btn.getAttribute('data-i18n-btn');
            if(translations[lang][key]) {
                btn.textContent = translations[lang][key];
            }
        });

        // Placeholders
        document.getElementById('subject').placeholder = translations[lang].placeholderSubject;
        document.getElementById('action').placeholder = translations[lang].placeholderAction;
        document.getElementById('charDNA').placeholder = translations[lang].placeholderDNA;
        document.getElementById('location').placeholder = translations[lang].placeholderLocation;
        document.getElementById('negative').placeholder = translations[lang].placeholderNegative;
        document.getElementById('result').placeholder = translations[lang].resultPlaceholder;

        document.querySelector('.summary-label').textContent = translations[lang].active + ' ';
        document.getElementById('langIndicator').textContent = 'EN OUTPUT';
        
        updateSummary();
    }

    // --- ACCORDION ---
    document.querySelectorAll('.panel-header').forEach(header => {
        header.addEventListener('click', () => {
            const panel = header.parentElement;
            panel.classList.toggle('active');
        });
    });

    // --- MULTI-SELECT BUTTONS ---
    document.querySelectorAll('.option-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            this.classList.toggle('selected');
            updateSummary();
        });
    });

    // --- SPICY MODE ---
    function toggleSpicyMode() {
        spicyModeEnabled = !spicyModeEnabled;
        document.getElementById('spicyToggle').classList.toggle('active', spicyModeEnabled);
        document.getElementById('spicyContent').style.display = spicyModeEnabled ? 'block' : 'none';
        updateSummary();
    }

    // --- SUMMARY SYSTEM ---
    function getSelectedValues(group) {
        const selected = document.querySelectorAll(`.option-grid[data-group="${group}"] .option-btn.selected`);
        return Array.from(selected).map(btn => btn.getAttribute('data-value'));
    }

    function getText(id) {
        const el = document.getElementById(id);
        return el.value.trim();
    }

    function updateSummary() {
        const tagsContainer = document.getElementById('summaryTags');
        tagsContainer.innerHTML = '';
        
        const selections = [
            { id: 'subject', label: 'Subject' },
            { id: 'action', label: 'Action' },
            { id: 'location', label: 'Location' },
            { group: 'focalLength', label: 'Lens' },
            { group: 'shotSize', label: 'Shot' },
            { group: 'timeOfDay', label: 'Time' },
            { group: 'lightingType', label: 'Light' },
            { group: 'artStyle', label: 'Style' },
            { group: 'resolution', label: 'Res' },
            { group: 'qualityModifiers', label: 'Quality' },
            { group: 'grokTerms', label: 'Grok' }
        ];

        let activeCount = 0;

        selections.forEach(sel => {
            let values = sel.group ? getSelectedValues(sel.group) : (getText(sel.id) ? [getText(sel.id).substring(0, 20) + (getText(sel.id).length > 20 ? '...' : '')] : []);
            values.forEach(value => {
                if(value) {
                    activeCount++;
                    const tag = document.createElement('div');
                    tag.className = 'summary-tag';
                    const safeValue = value.replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    tag.innerHTML = `<span>${value}</span><span class="remove" onclick="removeSelection('${sel.group}', '${sel.id}', '${safeValue}')">√ó</span>`;
                    tagsContainer.appendChild(tag);
                }
            });
        });

        if(activeCount === 0) {
            tagsContainer.innerHTML = `<span style="color:var(--text-muted); font-size:0.7rem;">${currentLang === 'en' ? 'No options selected' : 'Sin opciones seleccionadas'}</span>`;
        }

        // Panel summaries
        updatePanelSummary('sum-subject', [getText('subject'), getText('action')]);
        updatePanelSummary('sum-lens', [...getSelectedValues('focalLength'), ...getSelectedValues('specialtyLenses')]);
        updatePanelSummary('sum-shots', [...getSelectedValues('shotSize'), ...getSelectedValues('cameraAngles')]);
        updatePanelSummary('sum-movement', getSelectedValues('cameraMovement'));
        updatePanelSummary('sum-eyelines', getSelectedValues('eyeLines'));
        updatePanelSummary('sum-lighting', [...getSelectedValues('timeOfDay'), ...getSelectedValues('lightingType')]);
        updatePanelSummary('sum-optical', getSelectedValues('opticalEffects'));
        updatePanelSummary('sum-style', [...getSelectedValues('artStyle'), ...getSelectedValues('grokTerms')]);
        updatePanelSummary('sum-environment', [getText('location'), ...getSelectedValues('physicalDynamics')]);
        updatePanelSummary('sum-composition', getSelectedValues('composition'));
        updatePanelSummary('sum-quality', [...getSelectedValues('resolution'), ...getSelectedValues('qualityModifiers'), ...getSelectedValues('detailEnhancers')]);
        updatePanelSummary('sum-output', [...getSelectedValues('aspectRatio'), ...getSelectedValues('duration')]);
        updatePanelSummary('sum-audio', getSelectedValues('audio'));
        updatePanelSummary('sum-negative', [getText('negative')]);
        updatePanelSummary('sum-spicy', spicyModeEnabled ? ['Spicy ON'] : []);
    }

    function updatePanelSummary(elementId, values) {
        const el = document.getElementById(elementId);
        const filtered = values.filter(v => v);
        el.textContent = filtered.length > 0 ? filtered.join(' ‚Ä¢ ') : '';
    }

    function removeSelection(group, id, value) {
        if(group) {
            document.querySelectorAll(`.option-grid[data-group="${group}"] .option-btn`).forEach(btn => {
                if(btn.getAttribute('data-value') === value) {
                    btn.classList.remove('selected');
                }
            });
        }
        if(id) {
            document.getElementById(id).value = '';
        }
        updateSummary();
    }

    // --- GROK PROMPT GENERATION ---
    function generatePrompt() {
        let layer1 = [];
        let layer2 = [];
        let layer3 = [];
        let layer4 = [];
        let layer5 = [];

        const subject = getText('subject');
        const action = getText('action');
        const charDNA = getText('charDNA');
        
        if(subject) layer1.push(subject);
        if(action) layer1.push(action);
        if(charDNA) layer1.push(charDNA);

        const focalLength = getSelectedValues('focalLength');
        const specialtyLenses = getSelectedValues('specialtyLenses');
        const shotSize = getSelectedValues('shotSize');
        const cameraAngles = getSelectedValues('cameraAngles');
        const cameraMovement = getSelectedValues('cameraMovement');
        const eyeLines = getSelectedValues('eyeLines');
        
        [...focalLength, ...specialtyLenses, ...shotSize, ...cameraAngles, ...cameraMovement, ...eyeLines].forEach(v => layer1.push(v));

        const timeOfDay = getSelectedValues('timeOfDay');
        const lightingType = getSelectedValues('lightingType');
        const mood = getSelectedValues('mood');
        [...timeOfDay, ...lightingType, ...mood].forEach(v => layer2.push(v));

        const artStyle = getSelectedValues('artStyle');
        const renderEngine = getSelectedValues('renderEngine');
        const grokTerms = getSelectedValues('grokTerms');
        const opticalEffects = getSelectedValues('opticalEffects');
        const biome = getSelectedValues('biome');
        const physicalDynamics = getSelectedValues('physicalDynamics');
        const composition = getSelectedValues('composition');
        const location = getText('location');
        const resolution = getSelectedValues('resolution');
        const qualityModifiers = getSelectedValues('qualityModifiers');
        const detailEnhancers = getSelectedValues('detailEnhancers');
        
        [...artStyle, ...renderEngine, ...grokTerms, ...opticalEffects, ...biome, ...physicalDynamics, ...composition, ...resolution, ...qualityModifiers, ...detailEnhancers].forEach(v => layer3.push(v));
        if(location) layer3.push(location);

        const audio = getSelectedValues('audio');
        audio.forEach(v => layer4.push(v));

        const aspectRatio = getSelectedValues('aspectRatio');
        const duration = getSelectedValues('duration');
        [...aspectRatio, ...duration].forEach(v => layer5.push(v));

        if(spicyModeEnabled) {
            const spicy = getSelectedValues('spicy');
            spicy.forEach(v => layer3.push(v));
        }

        let finalPrompt = layer1.join(', ');
        
        if(layer2.length > 0) {
            finalPrompt += '; ' + layer2.join(', ');
        }
        
        if(layer3.length > 0) {
            finalPrompt += '; ' + layer3.join(', ');
        }
        
        if(layer4.length > 0) {
            finalPrompt += '; ' + layer4.join(', ');
        }

        if(layer5.length > 0) {
            finalPrompt += ' ' + layer5.join(', ');
        }

        const negativeCustom = getText('negative');
        const negativeQuick = getSelectedValues('negQuick');
        let negativeParts = ['No subtitles', 'No text', 'No closed captions'];
        
        if(negativeCustom) negativeParts.push(negativeCustom);
        negativeQuick.forEach(v => negativeParts.push(v));

        finalPrompt += ' --no ' + negativeParts.join(', ');

        document.getElementById('result').value = finalPrompt;
        updateSummary();
    }

    // --- UTILS ---
    function copyPrompt() {
        const el = document.getElementById('result');
        el.select();
        navigator.clipboard.writeText(el.value);
        const btn = event.target.closest('.btn');
        const orig = btn.innerHTML;
        btn.innerHTML = currentLang === 'en' ? '‚úÖ Copied!' : '‚úÖ ¬°Copiado!';
        setTimeout(() => {
            btn.innerHTML = 'üìã <span data-i18n="copy">' + (currentLang === 'en' ? 'Copy' : 'Copiar') + '</span>';
        }, 1500);
    }

    function clearAll() {
        document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
        document.querySelectorAll('textarea').forEach(t => t.value = '');
        spicyModeEnabled = false;
        document.getElementById('spicyToggle').classList.remove('active');
        document.getElementById('spicyContent').style.display = 'none';
        updateSummary();
        document.getElementById('result').value = '';
    }

    function randomize() {
        const groups = ['focalLength', 'shotSize', 'cameraAngles', 'cameraMovement', 'timeOfDay', 'lightingType', 'artStyle', 'physicalDynamics', 'resolution', 'qualityModifiers', 'aspectRatio'];
        groups.forEach(g => {
            const opts = document.querySelectorAll(`.option-grid[data-group="${g}"] .option-btn`);
            if(opts.length) {
                opts.forEach(o => o.classList.remove('selected'));
                const count = Math.floor(Math.random() * 2) + 1;
                for(let i = 0; i < count; i++) {
                    const random = opts[Math.floor(Math.random() * opts.length)];
                    random.classList.add('selected');
                }
            }
        });

        const subjects = ['A cybernetic warrior', 'A mysterious stranger', 'A futuristic athlete', 'An ethereal being'];
        const actions = ['walking through neon streets', 'standing in dramatic pose', 'running through the rain', 'gazing into the distance'];
        
        document.getElementById('subject').value = subjects[Math.floor(Math.random() * subjects.length)];
        document.getElementById('action').value = actions[Math.floor(Math.random() * actions.length)];
        
        updateSummary();
        generatePrompt();
    }

    // Init
    setLanguage('en');
    updateSummary();
</script>

</body>
</html>
